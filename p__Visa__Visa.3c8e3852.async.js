(self.webpackChunkparami_wallet=self.webpackChunkparami_wallet||[]).push([[811],{66620:function(M){M.exports={visaCard:"visaCard___bphzJ",subTitle:"subTitle___1LQU-",buttons:"buttons___2add8",or:"or___2GkXi",button:"button___1CjWQ"}},62066:function(M,g,e){"use strict";e.r(g);var te=e(58024),b=e(39144),_e=e(57663),v=e(71577),re=e(17462),j=e(76772),ne=e(34792),S=e(48086),D=e(3182),O=e(2824),le=e(402),x=e(59289),w=e(94043),d=e.n(w),N=e(46656),Z=e(1096),J=e(63667),P=e(67294),f=e(43581),F=e(55909),h=e.n(F),G=e(66620),_=e.n(G),s=e(85893),z=e(48764).Buffer,V=x.Z.Title,$=function(){var Q=(0,P.useState)(!1),C=(0,O.Z)(Q,2),Y=C[0],y=C[1],H=(0,P.useState)(""),T=(0,O.Z)(H,2),A=T[0],X=T[1],r=(0,f.YB)(),k=f.m8.location.query,U=k,l=U.audience,c=U.scope,q=c!=null?c:"",E=q.indexOf("sign")>-1,ee=localStorage.getItem("controllerUserAddress"),se=localStorage.getItem("controllerKeystore"),p=function(a){return z.from(a).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/m,"")},B=function(){var o=(0,D.Z)(d().mark(function a(){var u,n,I,m,R,i,K,W,L;return d().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(u=Date.now()/1e3|0,n=JSON.stringify({alg:E?"SrDSA":"none",typ:"JWT"}),I=JSON.stringify({iss:window.location.origin,sub:ee,aud:l,iat:u,exp:u+30}),m="".concat(p(n),".").concat(p(I)),E){t.next=8;break}return window.opener.postMessage("".concat(m,"."),l),window.close(),t.abrupt("return");case 8:if(R=new J.Y({type:"sr25519"}),i=(0,Z.Gh)(A,se),!(i==null||!i)){t.next=13;break}return S.default.error(r.formatMessage({id:"error.password.error"})),t.abrupt("return");case 13:K=R.createFromUri(i),W=K.sign(m),L="".concat(m,".").concat(p(W)),window.opener.postMessage(L,l),window.close();case 18:case"end":return t.stop()}},a)}));return function(){return o.apply(this,arguments)}}(),ae=function(){var o=(0,D.Z)(d().mark(function a(){return d().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:window.opener.postMessage("eyJhbGciOiJub25lIiwidHlwIjoiSldUIn0.e30.",l),window.close();case 2:case"end":return n.stop()}},a)}));return function(){return o.apply(this,arguments)}}();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:h().mainBgContainer,style:{height:"100vh"},children:(0,s.jsxs)("div",{className:h().pageContainer,children:[(0,s.jsxs)(b.Z,{className:_().visaCard,children:[(0,s.jsx)(V,{level:2,style:{fontWeight:"bold",textAlign:"center"},children:r.formatMessage({id:"visa.title"})}),(0,s.jsx)("span",{className:_().subTitle,children:r.formatMessage({id:"visa.subtitle"})}),(0,s.jsx)(j.Z,{style:{textAlign:"center",marginTop:50},message:"Audience",description:l,type:"info"}),(0,s.jsxs)("div",{className:_().buttons,children:[(0,s.jsx)(v.Z,{type:"primary",shape:"round",size:"large",className:_().button,style:{backgroundImage:"linear-gradient(-225deg, #FE2105 0%, #FF5B00 38%, #96E9EA 100%)"},onClick:function(){E?y(!0):B()},children:r.formatMessage({id:"visa.stamp"})}),(0,s.jsx)("span",{className:_().or,children:r.formatMessage({id:"index.or"})}),(0,s.jsx)(v.Z,{shape:"round",size:"large",className:_().button,onClick:ae,children:r.formatMessage({id:"visa.decline"})})]})]}),(0,s.jsx)("img",{src:"/images/logo-text-black.svg",style:{display:"block",width:150,opacity:.3,marginBottom:20,marginTop:50}})]})}),(0,s.jsx)(N.Z,{visable:Y,setVisable:y,password:A,setPassword:X,func:B})]})};g.default=$}}]);

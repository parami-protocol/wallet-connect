(self.webpackChunkparami_wallet=self.webpackChunkparami_wallet||[]).push([[0,172],{26419:function(Y){Y.exports={loginCard:"loginCard___3Fxzy",title:"title___2omau",appList:"appList___33GIy",appItem:"appItem___2u7Em",appIcon:"appIcon___25IhS",info:"info___1Wd90",name:"name___3GRwY",desc:"desc___10Ngp",rightArrow:"rightArrow___C_jrt",getWallet:"getWallet___3uTq7",modalContainer:"modalContainer___Sn93u",logo:"logo___2F0of"}},39277:function(Y){Y.exports={modalContainer:"modalContainer___Quo_z",title:"title___2LSra",slider:"slider___2FsgP",rangeBlocks:"rangeBlocks___3zwYV",block:"block___szS0f",blockBody:"blockBody___kosc6",control:"control___3qq9q",input:"input___2q-ZC",rate:"rate___3cqcy",fullrange:"fullrange___3qamD",gotoUniswap:"gotoUniswap___1m5k-"}},83789:function(Y){Y.exports={statistic:"statistic___1jzPl",tokenPair:"tokenPair___2DiXU",tokenIcon:"tokenIcon___3omgm",icon:"icon___WaV8I",last:"last___pfVuo",info:"info___2xFUr",pair:"pair___3Uns-",range:"range___2iXOD"}},24787:function(Y){Y.exports={mainContainer:"mainContainer___VzUCC",mainBgContainer:"mainBgContainer___2Nlq7",mainTopContainer:"mainTopContainer___2Cw6K",contentContainer:"contentContainer___2e-al",badge:"badge___3vf4B",dashboardCard:"dashboardCard___3oOcj",windowCard:"windowCard___3FjX2",windowCardBody:"windowCardBody___2zSRs",field:"field___3q5d2",title:"title___1BPSo",value:"value___1TvCY",rowField:"rowField___1vUg5",switchButton:"switchButton___3EjXy",statistic:"statistic___2TWER",modalBody:"modalBody___3SJQA",dividerTitle:"dividerTitle___1UTj3",table:"table___1zfPw",withAfterInput:"withAfterInput___3UZxJ",tabSelector:"tabSelector___2tj32",tabItem:"tabItem___3ymbk",inactive:"inactive___12iuZ",noAssets:"noAssets___FcwbD",topImage:"topImage___mHPfd"}},80391:function(Y,je,e){"use strict";e.d(je,{Z:function(){return Za}});var ia=e(58024),Re=e(39144),ba=e(57663),be=e(71577),Ca=e(48736),Le=e(27049),la=e(402),ye=e(59289),j=e(2824),T=e(67294),$=e(43581),W=e(24787),L=e.n(W),P=e(26419),C=e.n(P),I=e(69764),ke=e(3182),ce=e(12968),x=e(62462),Z=e(94043),oa=e.n(Z),Qe=e(8812),h=e(85893),u=function(){var le=(0,$.YB)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:C().modalContainer,children:[(0,h.jsx)(x.Z,{src:"/images/sns/metamask-logo.svg",preview:!1,className:C().logo}),(0,h.jsx)("span",{children:le.formatMessage({id:"dashboard.bridge.waitingWallet",defaultMessage:"Waiting for confirmation from {name}"},{name:"Metamask"})}),(0,h.jsx)(Le.Z,{}),(0,h.jsxs)("div",{className:C().getWallet,children:[le.formatMessage({id:"dashboard.bridge.dontHaveWallet",defaultMessage:"Don't have wallet?"}),(0,h.jsx)(be.Z,{type:"link",size:"middle",children:le.formatMessage({id:"dashboard.bridge.downloadHere",defaultMessage:"Download here"})})]})]})})},m=function(le){var Te=le.setWaitingModal,G=le.setWalletType,oe=(0,$.tT)("metaMask"),ae=oe.connect;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:C().appItem,onClick:(0,ke.Z)(oa().mark(function me(){return oa().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return Te(!0),G("Metamask"),ve.next=4,ae();case 4:Te(!1);case 5:case"end":return ve.stop()}},me)})),children:[(0,h.jsx)(x.Z,{src:"/images/sns/metamask_circle.svg",className:C().appIcon,preview:!1}),(0,h.jsxs)("div",{className:C().info,children:[(0,h.jsx)("span",{className:C().name,children:"Metamask"}),(0,h.jsx)("span",{className:C().desc,children:"Connect using browser wallet"})]}),(0,h.jsx)(Qe.Z,{className:C().rightArrow})]})})},pe=m,se=function(){var le=(0,T.useState)(!1),Te=(0,j.Z)(le,2),G=Te[0],oe=Te[1],ae=(0,T.useState)(""),me=(0,j.Z)(ae,2),Oe=me[0],ve=me[1],We=(0,$.YB)(),da=ye.Z.Title;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:L().mainContainer,children:(0,h.jsx)("div",{className:L().contentContainer,children:(0,h.jsxs)(Re.Z,{className:C().loginCard,bodyStyle:{padding:32,width:"100%"},children:[(0,h.jsx)(da,{level:4,className:C().title,children:We.formatMessage({id:"dashboard.bridge.login",defaultMessage:"Login"})}),(0,h.jsx)("div",{className:C().appList,children:(0,h.jsx)(pe,{setWaitingModal:oe,setWalletType:ve})}),(0,h.jsx)(Le.Z,{}),(0,h.jsxs)("div",{className:C().getWallet,children:[We.formatMessage({id:"dashboard.bridge.dontHaveWallet",defaultMessage:"Don't have wallet?"}),(0,h.jsx)(be.Z,{type:"link",size:"middle",children:We.formatMessage({id:"dashboard.bridge.downloadHere",defaultMessage:"Download here"})})]})]})})}),(0,h.jsx)(I.Z,{visable:G,title:Oe,content:Oe==="Metamask"&&(0,h.jsx)(u,{}),footer:!1})]})},Za=se},97494:function(Y,je,e){"use strict";e.r(je),e.d(je,{default:function(){return lt}});var ia=e(58024),Re=e(39144),ba=e(55250),be=e(85439),Ca=e(13062),Le=e(36725),la=e(89032),ye=e(1635),j=e(95300),T=e(7277),$=e(64896),W=e(37744),L=e(22385),P=e(31097),C=e(57663),I=e(71577),ke=e(12968),ce=e(62462),x=e(3182),Z=e(2824),oa=e(402),Qe=e(59289),h=e(94043),u=e.n(h),m=e(67294),pe=e(80265),se=e(8870),Za=e(20228),Je=e(11382),le=e(49111),Te=e(19650),G=e(37976),oe=e(98260),ae=e(43581),me=e(96519),Oe=e(40587),ve=e(50320),We=e(33777),da=e(77616),Da=e(39499),ua=e.n(Da),fe=e(74919);function Ia(g,c){if(!(!g||!c))try{var l=(0,da.vz)(g,c.decimals).toString();if(l!=="0")return oe.CurrencyAmount.fromRawAmount(c,ua().BigInt(l))}catch(p){console.debug('Failed to parse input amount: "'.concat(g,'"'),p)}}function Ce(g,c,l,p){if(!(!g||!c||!l||!p)){var r=Ia(p,c),f=Ia("1",g);if(!(!r||!f)){var k=new oe.Price(g,c,f.quotient,r.quotient),o,A=(0,fe.encodeSqrtRatioX96)(k.numerator,k.denominator);return ua().greaterThanOrEqual(A,fe.TickMath.MAX_SQRT_RATIO)?o=fe.TickMath.MAX_TICK:ua().lessThanOrEqual(A,fe.TickMath.MIN_SQRT_RATIO)?o=fe.TickMath.MIN_TICK:o=(0,fe.priceToClosestTick)(k),-(0,fe.nearestUsableTick)(o,fe.TICK_SPACINGS[l])}}}function Ra(g){return We.keccak256(["address","address","uint256","uint256"],[g.rewardToken,g.pool,g.startTime,g.endTime])}var ze=e(59749),a=e(85893),La=function(c){var l=c.row,p=(0,ae.tT)("metaMask"),r=p.account,f=p.provider,k=p.signer,o=p.chainId,A=p.blockNumber,K=(0,ae.tT)("contracts"),n=K.StakeContract,Q=(0,m.useState)(),z=(0,Z.Z)(Q,2),y=z[0],Se=z[1],_e=(0,m.useState)(!1),F=(0,Z.Z)(_e,2),ea=F[0],Ze=F[1],ya=(0,m.useState)([]),Ie=(0,Z.Z)(ya,2),ge=Ie[0],xe=Ie[1],Ua=(0,m.useState)([]),aa=(0,Z.Z)(Ua,2),he=aa[0],Ae=aa[1],Ba=(0,m.useState)([]),ta=(0,Z.Z)(Ba,2),de=ta[0],Pe=ta[1],Fe=(0,m.useState)([]),Ne=(0,Z.Z)(Fe,2),E=Ne[0],te=Ne[1],He=(0,m.useState)(),J=(0,Z.Z)(He,2),re=J[0],ka=J[1],Ve=(0,m.useState)(),na=(0,Z.Z)(Ve,2),q=na[0],N=na[1],U=(0,m.useState)([]),M=(0,Z.Z)(U,2),H=M[0],_=M[1],ue=(0,m.useState)(!0),Ue=(0,Z.Z)(ue,2),sa=Ue[0],ie=Ue[1],Xe=(0,m.useState)(!1),Ye=(0,Z.Z)(Xe,2),Be=Ye[0],Ge=Ye[1],we=(0,ae.YB)();(0,m.useEffect)(function(){console.log(r)},[r]);var $a=l.coinAddress,ne=l.tokenAddress,ee=l.incentives,Ta=l.poolAddress,Ea=function(){var S=(0,x.Z)(u().mark(function i(s){var t,D,w,d,Me;return u().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(!o||!f||!k)){b.next=2;break}return b.abrupt("return",void 0);case 2:return t=new me.CH(s,ve,f),D=t.connect(k),b.next=6,D.name();case 6:return w=b.sent,b.next=9,D.symbol();case 9:return d=b.sent,b.next=12,D.decimals();case 12:return Me=b.sent,b.abrupt("return",new oe.Token(o,s,Me,d,w));case 14:case"end":return b.stop()}},i)}));return function(s){return S.apply(this,arguments)}}(),ot=function(){var S=(0,x.Z)(u().mark(function i(){var s,t;return u().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Ea(l.tokenAddress);case 2:return s=w.sent,w.next=5,Ea(l.coinAddress);case 5:t=w.sent,console.log(s,t),ka(s),N(t);case 9:case"end":return w.stop()}},i)}));return function(){return S.apply(this,arguments)}}();(0,m.useEffect)(function(){if(!(!f||!k)){try{var S=new me.CH(l.lpAddress,Oe,f),i=S.connect(k);Se(i)}catch(s){console.log(s)}ot()}},[o,f,k]);var dt=(0,m.useCallback)((0,x.Z)(u().mark(function S(){var i;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(y){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,console.log("LPContract",y),t.next=6,y==null?void 0:y.setApprovalForAll(n==null?void 0:n.address,!0);case 6:return i=t.sent,console.log(i),t.next=10,i.wait();case 10:return t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",!1);case 17:case"end":return t.stop()}},S,null,[[2,13]])})),[y,n,r]),ut=(0,m.useCallback)((0,x.Z)(u().mark(function S(){var i;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(y){t.next=2;break}return t.abrupt("return");case 2:return Ge(!0),t.next=5,y==null?void 0:y.isApprovedForAll(r,n==null?void 0:n.address);case 5:i=t.sent,console.log("allowance",i),ie(i);case 8:case"end":return t.stop()}},S)})),[y,n,r]);(0,m.useEffect)(function(){ut()},[y,r,n]),(0,m.useEffect)(function(){if(re&&q){var S=[{tickLower:Ce(re,q,G.lk.MEDIUM,ee[0].maxPrice)||0,tickUpper:Ce(re,q,G.lk.MEDIUM,ee[0].minPrice)||0},{tickLower:Ce(re,q,G.lk.MEDIUM,ee[1].maxPrice)||0,tickUpper:Ce(re,q,G.lk.MEDIUM,ee[1].minPrice)||0},{tickLower:Ce(re,q,G.lk.MEDIUM,ee[2].maxPrice)||0,tickUpper:Ce(re,q,G.lk.MEDIUM,ee[2].minPrice)||0}];console.log(re,q),console.log("tmpTicks",S),te(S)}},[re,q]);var O=[{rewardToken:ne,pool:Ta,startTime:ee[0].startTime,endTime:ee[0].endTime},{rewardToken:ne,pool:Ta,startTime:ee[1].startTime,endTime:ee[1].endTime},{rewardToken:ne,pool:Ta,startTime:ee[2].startTime,endTime:ee[2].endTime}];function ct(){return Sa.apply(this,arguments)}function Sa(){return Sa=(0,x.Z)(u().mark(function S(){var i,s,t,D,w,d,Me,B,b,$e,wa,ra,Ke,Ee,De,V,Ma,ja;return u().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,y==null?void 0:y.balanceOf(r);case 2:if(i=v.sent,console.log(i),i){v.next=6;break}return v.abrupt("return");case 6:console.log(i),s=[],t=0;case 9:if(!(t<i.toNumber())){v.next=23;break}return v.next=12,y==null?void 0:y.tokenOfOwnerByIndex(r,t);case 12:if(D=v.sent,parseInt(D)!=NaN){v.next=15;break}return v.abrupt("return");case 15:return v.next=17,y==null?void 0:y.positions(D);case 17:w=v.sent,d=(0,se.Z)((0,se.Z)({},w),{},{tokenId:D}),s.push(d);case 20:t++,v.next=9;break;case 23:for(console.log("positions",s),Me=[$a.toLowerCase(),ne.toLowerCase()],console.log("array",Me),B=[],b=0;b<s.length;b++)if(s[b].fee===G.lk.MEDIUM&&s[b].liquidity.toString()!=="0"&&Me.includes(s[b].token0.toLowerCase())&&Me.includes(s[b].token1.toLowerCase()))for($e=0;$e<O.length;$e++)E[$e].tickLower<=s[b].tickLower&&s[b].tickUpper<=E[$e].tickUpper&&B.push({tokenId:s[b].tokenId.toNumber(),status:"unstaked",tickLower:s[b].tickLower,tickUpper:s[b].tickUpper,incentiveIndex:$e});return console.log("liquid",B),v.next=31,n==null?void 0:n.getUserTokenIdCount(r);case 31:wa=v.sent,console.log("tokenCountFromStakeManager",wa),ra=0;case 34:if(!(ra<wa)){v.next=51;break}if(n){v.next=38;break}return console.log("StakeContract is null"),v.abrupt("return");case 38:return v.next=40,n["getTokenId(address,uint256)"](r,ra);case 40:if(Ke=v.sent,console.log("tokenId",Ke),!Ke){v.next=48;break}return v.next=45,n==null?void 0:n.deposits(Ke);case 45:for(Ee=v.sent,console.log("staked",Ee),De=0;De<O.length;De++)E[De].tickLower<=Ee.tickLower&&Ee.tickUpper<=E[De].tickUpper&&B.push({tokenId:Ke.toNumber(),status:"staked",tickLower:Ee.tickLower,tickUpper:Ee.tickUpper,incentiveIndex:De});case 48:ra++,v.next=34;break;case 51:console.log("liquid2",B),V=0;case 53:if(!(V<B.length)){v.next=78;break}if(B[V].status!=="unstaked"){v.next=58;break}B[V]=(0,se.Z)((0,se.Z)({},B[V]),{},{reward:"0"}),v.next=75;break;case 58:return console.log("incentiveId",O),console.log("tokenId",B[V].tokenId),console.log("incentiveKey",O[B[V].incentiveIndex]),v.prev=61,v.next=64,n==null?void 0:n.getAccruedRewardInfo(O[B[V].incentiveIndex],B[V].tokenId);case 64:Ma=v.sent,console.log(Ma),ja=(0,ze.mI)(Ma.reward,18),console.log("reward",ja),B[V]=(0,se.Z)((0,se.Z)({},B[V]),{},{reward:ja}),v.next=75;break;case 71:v.prev=71,v.t0=v.catch(61),console.log("error",v.t0),B[V]=(0,se.Z)((0,se.Z)({},B[V]),{},{reward:"0"});case 75:V++,v.next=53;break;case 78:console.log("liquid3",B),_(B),Ge(!1);case 81:case"end":return v.stop()}},S,null,[[61,71]])})),Sa.apply(this,arguments)}(0,m.useEffect)(function(){!y||r===""||E.length<3||ct()},[y,r,A,E]);var pt=(0,m.useCallback)((0,x.Z)(u().mark(function S(){var i;return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Ze(!0),t.next=4,dt();case 4:i=t.sent,i&&Ze(!1),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),Ze(!1);case 12:case"end":return t.stop()}},S,null,[[0,8]])})),[n,y,r]),mt=(0,m.useCallback)(function(){var S=(0,x.Z)(u().mark(function i(s,t){var D;return u().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return ge[s]=!0,xe(ge),console.log(O[t],s),d.prev=3,d.next=6,n==null?void 0:n.depositToken(O[t],s);case 6:return D=d.sent,d.next=9,D.wait();case 9:ge[s]=!1,xe(ge),d.next=18;break;case 13:d.prev=13,d.t0=d.catch(3),console.error(d.t0),ge[s]=!1,xe(ge);case 18:case"end":return d.stop()}},i,null,[[3,13]])}));return function(i,s){return S.apply(this,arguments)}}(),[n,O,r]),vt=(0,m.useCallback)(function(){var S=(0,x.Z)(u().mark(function i(s,t){return u().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return he[s]=!0,Ae(he),w.prev=2,w.next=5,n==null?void 0:n.unstakeToken(O[t],s,r);case 5:he[s]=!1,Ae(he),w.next=14;break;case 9:w.prev=9,w.t0=w.catch(2),console.error(w.t0),he[s]=!1,Ae(he);case 14:case"end":return w.stop()}},i,null,[[2,9]])}));return function(i,s){return S.apply(this,arguments)}}(),[n,O,r]),ft=(0,m.useCallback)(function(){var S=(0,x.Z)(u().mark(function i(s,t,D){return u().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return de[s]=!0,Pe(de),d.prev=2,d.next=5,n==null?void 0:n.claimReward(O[D],s,r,(0,ze.HM)(t,18).toString());case 5:de[s]=!1,Pe(de),d.next=14;break;case 9:d.prev=9,d.t0=d.catch(2),console.error(d.t0),de[s]=!1,Pe(de);case 14:case"end":return d.stop()}},i,null,[[2,9]])}));return function(i,s,t){return S.apply(this,arguments)}}(),[n,O,r]),gt=(0,m.useCallback)((0,x.Z)(u().mark(function S(){var i,s,t,D;return u().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,i=(0,ze.HM)(String(1e3),18),console.log("Create Incentives",i.toString()),d.next=5,n==null?void 0:n.createIncentive(O[0],i.toString(),E[0].tickLower,E[0].tickUpper);case 5:return s=d.sent,d.next=8,n==null?void 0:n.createIncentive(O[1],i.toString(),E[1].tickLower,E[1].tickUpper);case 8:return t=d.sent,d.next=11,n==null?void 0:n.createIncentive(O[2],i.toString(),E[2].tickLower,E[2].tickUpper);case 11:D=d.sent,console.log(s,t,D),d.next=18;break;case 15:d.prev=15,d.t0=d.catch(0),console.error(d.t0);case 18:case"end":return d.stop()}},S,null,[[0,15]])})),[O,n]),ht=(0,m.useCallback)((0,x.Z)(u().mark(function S(){return u().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:alert("TODO: cancel incentive");case 1:case"end":return s.stop()}},S)})),[O]),yt=[{title:"Token",dataIndex:"tokenId"},{title:"Reward (AD3)",dataIndex:"reward"},{title:"Action",width:300,render:function(i){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(Te.Z,{children:[(0,a.jsx)(I.Z,{type:"primary",shape:"round",size:"large",onClick:i.status==="staked"?function(){return vt(i.tokenId,i.incentiveIndex)}:function(){return mt(i.tokenId,i.incentiveIndex)},children:i.status==="staked"?"Unstake":"Stake"}),(0,a.jsx)(I.Z,{type:"primary",shape:"round",size:"large",disabled:i.reward==="0",onClick:function(){return ft(i.tokenId,i.reward,i.incentiveIndex)},children:"Claim"})]})})}}];return(0,a.jsxs)(a.Fragment,{children:[r=="0x2c71b3e0b068c4d365add4035dc7f8eb6dc6c910"&&(0,a.jsx)(W.Z,{ghost:!1,title:we.formatMessage({id:"dashboard.stake.admin",defaultMessage:"Admin"}),extra:[(0,a.jsx)(I.Z,{size:"large",shape:"round",type:"primary",onClick:gt,children:we.formatMessage({id:"dashboard.stake.createIncentive",defaultMessage:"Create Incentive"})}),(0,a.jsx)(I.Z,{size:"large",shape:"round",type:"primary",onClick:ht,children:we.formatMessage({id:"dashboard.stake.cancelIncentive",defaultMessage:"Cancel Incentive"})})]}),!sa&&(0,a.jsx)(W.Z,{extra:[(0,a.jsx)(I.Z,{size:"large",shape:"round",type:"primary",disabled:ea,onClick:pt,children:ea?"Pending":"Approve LP Operation"})]}),Be?(0,a.jsx)(Je.Z,{spinning:Be,style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"}}):(0,a.jsx)(be.Z,{columns:yt,dataSource:H,bordered:!1,pagination:!1})]})},Oa=La,Wa=e(21046),za=e(24787),qe=e.n(za),Fa=e(83789),X=e.n(Fa),Ha=e(8812),Va=e(2877),xa=e(69764),Xa=e(80391),kt=e(47673),Aa=e(32787),Tt=e(66126),Ya=e(75454),Ga=e(39277),R=e.n(Ga),Pa=e(1058),Na=e(49101),Ka=function(c){var l=c.pools,p=c.setVisiable,r=(0,ae.YB)(),f=m.useState(1),k=(0,Z.Z)(f,2),o=k[0],A=k[1],K=Qe.Z.Title,n={0:"100%",1:"150%",2:"200%"};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:R().modalContainer,children:[(0,a.jsx)(K,{level:5,className:R().title,children:"Select APY"}),(0,a.jsx)(Ya.Z,{min:0,max:2,marks:n,step:null,defaultValue:1,className:R().slider,onChange:function(z){A(z)}}),(0,a.jsxs)("div",{className:R().rangeBlocks,children:[(0,a.jsx)("div",{className:R().block,children:(0,a.jsxs)("div",{className:R().blockBody,children:[(0,a.jsx)("span",{className:R().title,children:r.formatMessage({id:"dashboard.stake.minPrice",defaultMessage:"Min Price"})}),(0,a.jsxs)("div",{className:R().control,children:[(0,a.jsx)(I.Z,{disabled:!0,size:"middle",shape:"circle",type:"default",icon:(0,a.jsx)(Pa.Z,{})}),(0,a.jsx)(Aa.Z,{disabled:!0,placeholder:"0.0",className:R().input,bordered:!1,value:l[0].incentives[o].minPrice}),(0,a.jsx)(I.Z,{disabled:!0,size:"middle",shape:"circle",type:"default",icon:(0,a.jsx)(Na.Z,{})})]}),(0,a.jsx)("span",{className:R().rate,children:r.formatMessage({id:"dashboard.stake.rateDesc",defaultMessage:"{from} per {to}"},{from:"AD3",to:"ETH"})})]})}),(0,a.jsx)("div",{className:R().block,children:(0,a.jsxs)("div",{className:R().blockBody,children:[(0,a.jsx)("span",{className:R().title,children:r.formatMessage({id:"dashboard.stake.maxPrice",defaultMessage:"Max Price"})}),(0,a.jsxs)("div",{className:R().control,children:[(0,a.jsx)(I.Z,{disabled:!0,size:"middle",shape:"circle",type:"default",icon:(0,a.jsx)(Pa.Z,{})}),(0,a.jsx)(Aa.Z,{disabled:!0,placeholder:"0.0",className:R().input,bordered:!1,value:l[0].incentives[o].maxPrice}),(0,a.jsx)(I.Z,{disabled:!0,size:"middle",shape:"circle",type:"default",icon:(0,a.jsx)(Na.Z,{})})]}),(0,a.jsx)("span",{className:R().rate,children:r.formatMessage({id:"dashboard.stake.rateDesc",defaultMessage:"{from} per {to}"},{from:"AD3",to:"ETH"})})]})})]}),(0,a.jsx)("div",{className:R().fullrange,children:(0,a.jsx)(I.Z,{block:!0,disabled:!0,size:"middle",shape:"round",children:r.formatMessage({id:"dashboard.stake.fullRange",defaultMessage:"Full Range"})})}),(0,a.jsx)("div",{className:R().gotoUniswap,children:(0,a.jsx)(I.Z,{block:!0,size:"large",shape:"round",type:"primary",icon:(0,a.jsx)(ce.Z,{src:"/images/crypto/uniswap-icon.svg",height:"100%",preview:!1,style:{marginRight:20}}),onClick:function(){window.open("https://app.uniswap.org/#/add/".concat(l[0].coin==="ETH"?"ETH":l[0].coinAddress,"/").concat(l[0].tokenAddress,"/3000"))},children:r.formatMessage({id:"dashboard.stake.gotoUniswap",defaultMessage:"Goto Uniswap"})})})]})})},Qa=Ka,Ja=e(1101);function qa(g){return ca.apply(this,arguments)}function ca(){return ca=(0,x.Z)(u().mark(function g(c){var l,p,r,f,k,o,A,K,n;return u().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,Promise.all([c.factory(),c.token0(),c.token1(),c.fee(),c.tickSpacing(),c.maxLiquidityPerTick()]);case 2:return l=z.sent,p=(0,Z.Z)(l,6),r=p[0],f=p[1],k=p[2],o=p[3],A=p[4],K=p[5],n={factory:r,token0:f,token1:k,fee:o,tickSpacing:A,maxLiquidityPerTick:K},z.abrupt("return",n);case 12:case"end":return z.stop()}},g)})),ca.apply(this,arguments)}function _a(g){return pa.apply(this,arguments)}function pa(){return pa=(0,x.Z)(u().mark(function g(c){var l,p,r,f,k;return u().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,Promise.all([c.liquidity(),c.slot0()]);case 2:return l=A.sent,p=(0,Z.Z)(l,2),r=p[0],f=p[1],k={liquidity:r,sqrtPriceX96:f[0],tick:f[1],observationIndex:f[2],observationCardinality:f[3],observationCardinalityNext:f[4],feeProtocol:f[5],unlocked:f[6]},A.abrupt("return",k);case 8:case"end":return A.stop()}},g)})),pa.apply(this,arguments)}function ma(g,c,l,p,r){return va.apply(this,arguments)}function va(){return va=(0,x.Z)(u().mark(function g(c,l,p,r,f){var k,o,A,K,n,Q,z,y,Se;return u().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return console.log(p.address,r.address),F.next=3,c.getPool(p.address,r.address,f);case 3:return k=F.sent,console.log(k),o=new me.CH(k,Ja.Mt,l),F.next=8,Promise.all([qa(o),_a(o)]);case 8:return A=F.sent,K=(0,Z.Z)(A,2),n=K[0],Q=K[1],z=p,y=r,Se=new G.Kg(z,y,n.fee,Q.sqrtPriceX96.toString(),Q.liquidity.toString(),Q.tick),F.abrupt("return",Se);case 16:case"end":return F.stop()}},g)})),va.apply(this,arguments)}function St(g){return fa.apply(this,arguments)}function fa(){return fa=_asyncToGenerator(_regeneratorRuntime.mark(function g(c){var l,p,r,f;return _regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,c.signer.getChainId();case 2:return l=o.sent,console.log("chainId",l),p=new Token(l,contractAddresses.ad3[l],18),r=new Token(l,contractAddresses.usdt[l],6),o.next=8,ma(c,c.provider,p,r,3e3);case 8:return f=o.sent,console.log("pool",f),o.abrupt("return",f.token0Price);case 11:case"end":return o.stop()}},g)})),fa.apply(this,arguments)}function et(g){return ga.apply(this,arguments)}function ga(){return ga=(0,x.Z)(u().mark(function g(c){var l,p,r,f;return u().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,c.signer.getChainId();case 2:return l=o.sent,p=new oe.Token(l,pe.q7.ad3[l],18),r=new oe.Token(l,pe.q7.weth[l],18),o.next=7,ma(c,c.provider,p,r,3e3);case 7:return f=o.sent,o.abrupt("return",f.token0Price);case 9:case"end":return o.stop()}},g)})),ga.apply(this,arguments)}function wt(g){return ha.apply(this,arguments)}function ha(){return ha=_asyncToGenerator(_regeneratorRuntime.mark(function g(c){var l,p,r,f;return _regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,c.signer.getChainId();case 2:return l=o.sent,p=new Token(l,contractAddresses.ad3[l],18),r=new Token(l,contractAddresses.usdc[l],18),o.next=7,ma(c,c.provider,p,r,3e3);case 7:return f=o.sent,o.abrupt("return",f.token0Price);case 9:case"end":return o.stop()}},g)})),ha.apply(this,arguments)}var Mt=null,at="/images/logo-round-core.svg",tt="/images/crypto/eth-circle.svg",nt="/images/crypto/usdt-circle.svg",st="/images/crypto/usdc-circle.svg",rt=Qe.Z.Title,it=function(){var c=(0,m.useState)("0"),l=(0,Z.Z)(c,2),p=l[0],r=l[1],f=(0,m.useState)(BigInt(0)),k=(0,Z.Z)(f,2),o=k[0],A=k[1],K=(0,m.useState)([]),n=(0,Z.Z)(K,2),Q=n[0],z=n[1],y=(0,m.useState)(!1),Se=(0,Z.Z)(y,2),_e=Se[0],F=Se[1],ea=(0,m.useState)(!1),Ze=(0,Z.Z)(ea,2),ya=Ze[0],Ie=Ze[1],ge=(0,m.useState)(!1),xe=(0,Z.Z)(ge,2),Ua=xe[0],aa=xe[1],he=(0,m.useState)(!1),Ae=(0,Z.Z)(he,2),Ba=Ae[0],ta=Ae[1],de=(0,ae.tT)("metaMask"),Pe=de.account,Fe=de.chainId,Ne=(0,ae.tT)("contracts"),E=Ne.Ad3Contract,te=Ne.StakeContract,He=Ne.FactoryContract,J=(0,ae.YB)(),re=function(){var N=(0,x.Z)(u().mark(function U(){var M;return u().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,E==null?void 0:E.approve(te==null?void 0:te.address,Wa.Bz);case 2:return M=_.sent,ta(!0),_.next=6,M.wait();case 6:aa(!0);case 7:case"end":return _.stop()}},U)}));return function(){return N.apply(this,arguments)}}();(0,m.useEffect)(function(){E&&E.totalSupply().then(function(N){console.log(N),console.log(N.toString()),A(N)})},[E]);function ka(){return Ve.apply(this,arguments)}function Ve(){return Ve=(0,x.Z)(u().mark(function N(){var U;return u().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!He){H.next=5;break}return H.next=3,et(He);case 3:U=H.sent,r(U.toSignificant());case 5:case"end":return H.stop()}},N)})),Ve.apply(this,arguments)}(0,m.useEffect)(function(){ka()},[He]);var na=(0,m.useCallback)((0,x.Z)(u().mark(function N(){var U,M,H;return u().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(U=pe.Dr,!U.length){ue.next=7;break}return M=U.map(function(){var Ue=(0,x.Z)(u().mark(function sa(ie){var Xe,Ye,Be,Ge,we;return u().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return Xe={rewardToken:ie.tokenAddresses[Fe],pool:ie.poolAddresses[Fe],startTime:ie.incentives[2].startTime,endTime:ie.incentives[2].endTime},console.log(Xe),Ye=Ra(Xe),ne.next=5,te==null?void 0:te.incentives(Ye);case 5:return Be=ne.sent,console.log("incentive",Be),console.log("pool",ie),Ge=(Date.now()/1e3|0)-ie.incentives[2].startTime,we=(ie.incentives[2].totalReward-Number((0,ze.mI)(Be.totalRewardUnclaimed,18)))/Ge*365*24*60*60/ie.incentives[2].totalReward*100,ne.abrupt("return","".concat(we>0?we.toFixed(2):"0.00","%"));case 11:case"end":return ne.stop()}},sa)}));return function(sa){return Ue.apply(this,arguments)}}()),ue.next=5,Promise.all(M);case 5:H=ue.sent,z(H);case 7:case"end":return ue.stop()}},N)})),[te]);(0,m.useEffect)(function(){!te||(console.log(Pe),na())},[te]);var q=[{title:"Assets",dataIndex:"name",key:"lpAddress",render:function(U,M){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:X().tokenPair,children:[(0,a.jsxs)("div",{className:X().tokenIcon,children:[M.token==="AD3"?(0,a.jsx)(ce.Z,{className:X().icon,src:at,preview:!1}):null,M.coin==="ETH"?(0,a.jsx)(ce.Z,{className:"".concat(X().icon," ").concat(X().last),src:tt,preview:!1}):null,M.coin==="USDT"?(0,a.jsx)(ce.Z,{className:"".concat(X().icon," ").concat(X().last),src:nt,preview:!1}):null,M.coin==="USDC"?(0,a.jsx)(ce.Z,{className:"".concat(X().icon," ").concat(X().last),src:st,preview:!1}):null]}),(0,a.jsxs)("div",{className:X().info,children:[(0,a.jsxs)("span",{className:X().pair,children:["Uniswap V3: ",M.name]}),(0,a.jsxs)("span",{className:X().range,children:["Reward Range: $",M.incentives[0].minPrice,"-$",M.incentives[2].maxPrice]})]})]})})}},{title:"APY",dataIndex:"apy",key:"lpAddress",render:function(U,M){return(0,a.jsx)("strong",{children:M.apy})}},{title:"Liquidity",dataIndex:"actions",key:"lpAddress",render:function(U,M){return(0,a.jsx)(P.Z,{title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rt,{level:5,style:{color:"#fff"},children:J.formatMessage({id:"dashboard.stake.tip.incentiveLiquidity",defaultMessage:"Incentive Liquidity"})}),(0,a.jsx)("small",{children:"Fee tier: 0.3%"}),(0,a.jsx)("br",{}),(0,a.jsxs)("small",{children:["Reward Range: $",M.incentives[0].minPrice,"-$",M.incentives[2].maxPrice]})]}),children:(0,a.jsx)(I.Z,{size:"large",shape:"round",type:"primary",onClick:function(){Ie(!0)},children:"Add"})})}}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:qe().mainContainer,children:(0,a.jsx)("div",{className:qe().contentContainer,children:(0,a.jsx)(Re.Z,{style:{padding:0},bodyStyle:{padding:0,width:"100%"},className:qe().dashboardCard,children:Pe?(0,a.jsxs)("div",{className:qe().windowCardBody,children:[(0,a.jsx)(W.Z,{ghost:!1,title:J.formatMessage({id:"dashboard.bridge.overview",defaultMessage:"Overview"}),extra:[(0,a.jsx)(I.Z,{shape:"round",type:"primary",size:"large",onClick:function(){window.open("https://app.uniswap.org/#/swap?outputCurrency=".concat(pe.q7.ad3[Fe]))},children:J.formatMessage({id:"dashboard.bridge.exchangeAD3",defaultMessage:"Exchange AD3"})})]}),(0,a.jsx)("div",{className:X().statistic,children:(0,a.jsxs)(Le.Z,{gutter:[16,16],style:{width:"100%",textAlign:"center"},children:[(0,a.jsx)(ye.Z,{xs:24,sm:24,md:8,lg:8,xl:8,children:(0,a.jsx)(T.Z,{title:J.formatMessage({id:"pages.uniswap.totalSupply",defaultMessage:"Total Supply"}),value:(0,ze.mI)(o,18)})}),(0,a.jsx)(ye.Z,{xs:24,sm:24,md:8,lg:8,xl:8,children:(0,a.jsx)(T.Z,{title:J.formatMessage({id:"pages.uniswap.tvl",defaultMessage:"TVL"}),prefix:"$",value:37523.8})}),(0,a.jsx)(ye.Z,{xs:24,sm:24,md:8,lg:8,xl:8,children:(0,a.jsx)(T.Z,{title:J.formatMessage({id:"pages.uniswap.ad3CurrentPrice",defaultMessage:"AD3 Current Price"}),prefix:"$",value:p+"ETH"})})]})}),(0,a.jsx)(be.Z,{expandIconColumnIndex:q.length,bordered:!1,columns:q,dataSource:(0,pe.X)(4,Q),pagination:!1,expandIcon:function(U){var M=U.expanded,H=U.onExpand,_=U.record;return(0,a.jsxs)(I.Z,{type:"text",onClick:function(Ue){return H(_,Ue)},children:["Details",(0,a.jsx)(Ha.Z,{rotate:M?90:0},_.name)]})},expandable:{expandedRowRender:function(U,M){return(0,a.jsx)(Oa,{row:U},M)}}})]}):(0,a.jsx)(I.Z,{block:!0,type:"primary",size:"large",shape:"round",icon:(0,a.jsx)(Va.Z,{}),onClick:function(){F(!0)},children:J.formatMessage({id:"dashboard.bridge.connectETH",defaultMessage:"Connect Wallet"})})})})}),(0,a.jsx)(xa.Z,{visable:_e,title:J.formatMessage({id:"dashboard.bridge.selectAWallet",defaultMessage:"Select a Wallet"}),content:(0,a.jsx)(Xa.Z,{setSelectModal:F}),footer:!1,close:function(){return F(!1)}}),(0,a.jsx)(xa.Z,{visable:ya,title:J.formatMessage({id:"dashboard.stake.addLiquidity",defaultMessage:"Add Liquidity"}),content:(0,a.jsx)(Qa,{pools:(0,pe.X)(4,Q),setVisiable:Ie}),footer:!1,close:function(){return Ie(!1)}})]})},lt=it},59749:function(Y,je,e){"use strict";e.d(je,{mI:function(){return la},HM:function(){return ye}});var ia=e(2824),Re=e(13550),ba=e.n(Re),be=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,W=_formatBalance.getDefaults(),L=W.unit,P=W.decimals;if(typeof T=="undefined")return"--- ".concat(L);var C=new BN("".concat(T)).toString().padStart(P+1,"0"),I=C.substr(0,C.length-P),ke=C.substr(C.length-P,3);return $?"".concat(I,".").concat(ke," ").concat(L):"".concat(I,".").concat(ke)},Ca=function(T){if(!T)return new BN(0);var $=_formatBalance.getDefaults(),W=$.decimals,L="".concat(T).split("."),P=_slicedToArray(L,2),C=P[0],I=P[1],ke=I===void 0?"0":I,ce="".concat(C).concat(ke.padEnd(W,"0"));return new BN(ce)},Le=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return T?T.startsWith("0x")?T:"0x".concat(T):"0x"};function la(j,T){if(!j||(typeof j!="string"&&(j=j.toString()),j==="0"))return"0";if(j.length<=T){var $=j.padStart(T,"0"),W=$.search(/([0]+)$/);return W>-1&&($=$.substring(0,W)),$.length>0?$="0."+$:$="0",$}var L=j.substring(0,j.length-T),P=j.substring(j.length-T),C=P.search(/([0]+)$/);return C>-1&&(P=P.substring(0,C)),P.length===0?L:L+"."+P}function ye(j,T){if(!j||typeof j!="string")return BigInt(0);if(j.indexOf(".")===-1)return BigInt(j.padEnd(j.length+T,"0"));var $=j.split("."),W=(0,ia.Z)($,2),L=W[0],P=W[1];return L.length===1&&L==="0"&&(L=""),P.length<T?BigInt(L+P.padEnd(T,"0")):BigInt(L+P.substring(0,T))}},50320:function(Y){"use strict";Y.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')}}]);

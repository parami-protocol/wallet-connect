(self.webpackChunkparami_wallet=self.webpackChunkparami_wallet||[]).push([[298],{86625:function(M){M.exports={avatarContainer:"avatarContainer___1Aoxp",uploadMask:"uploadMask___11JDR",icon:"icon___1117q",avatar:"avatar___2qKmO"}},31639:function(M){M.exports={did:"did___1Wse3",unit:"unit___UR_Yf"}},88607:function(M){M.exports={assetsList:"assetsList___3appm",noAssets:"noAssets___tAcl_",topImage:"topImage___153xu",field:"field___2AWla",title:"title___2Bu4L",name:"name___3ZvNf",price:"price___1-cal",icon:"icon___2i0uk",value:"value___2tMI_",available:"available___mmljx",reserved:"reserved___2vD8E"}},73627:function(M){M.exports={avatarEdit:"avatarEdit___2KTde",avatar:"avatar___S7cLd",avatarSaveDesc:"avatarSaveDesc___1HMMf",buttons:"buttons___26oO_",button:"button___tNbie",avatarContainer:"avatarContainer___G8azK",uploadMask:"uploadMask___3yoaG",icon:"icon___1TKUY"}},59367:function(M){M.exports={balanceCard:"balanceCard___1W0cn",totalBalance:"totalBalance___2j75X",title:"title___ztjFj",amount:"amount___3Q-3t",suffix:"suffix___31g4A",availableBalance:"availableBalance___4C0WM",buttons:"buttons___1w376",button:"button___1q85v",buttonContent:"buttonContent___gsp86",otherBalance:"otherBalance___3mlLd",field:"field___hCSA8",name:"name___13KL3",value:"value___13-ZT"}},15004:function(M){M.exports={guide:"guide___2tLoi",topIcon:"topIcon___3UxCX",title:"title___3rpg5",avatar:"avatar___1cL9y"}},26180:function(M){M.exports={recordList:"recordList___28Inz",title:"title___BS5AE",timeline:"timeline___2y8-b",timelineItem:"timelineItem___1t3uY",body:"body___3ZwvS",left:"left___FWp4y",desc:"desc___33O5M",receiver:"receiver___2TIfw",right:"right___KtNrH",address:"address___3a3D4",time:"time___3TvD_"}},39545:function(M){M.exports={tagContainer:"tagContainer___1PkET",tagItem:"tagItem___3TVRN",value:"value___Mtqpe"}},4155:function(M){M.exports={indexContainer:"indexContainer___1oKuT",left:"left___3h0Sa",right:"right___1o7kr",sideCard:"sideCard___1WisH",topIcon:"topIcon___3HsoF",title:"title___fC196",input:"input___2YdZV",fiatAmount:"fiatAmount___3Fcll",selectAssets:"selectAssets___2QI7M",availableBalance:"availableBalance___1hgnr",token:"token___36NVd",icon:"icon___15HZU",name:"name___1E7m9",balance:"balance___3ic9z",fiat:"fiat___2AQA8",buttons:"buttons___3YNL6",button:"button___12z9a",listBtn:"listBtn___3O45P",field:"field___2anem",value:"value___D7eFr",fromQRCode:"fromQRCode___1dfEK",qrcode:"qrcode___3MC3N",exchanges:"exchanges___30zpx",searchBar:"searchBar___ieTJx",searchInput:"searchInput___3ngcE",assetsList:"assetsList___vjhB1",charge:"charge___sf44S",tabSelector:"tabSelector___2h6RI",tabItem:"tabItem___vWoCN",inactive:"inactive___2BWVU",card:"card___1JX6j"}},15977:function(M,Y,c){"use strict";var mt=c(12968),S=c(62462),Q=c(67294),R=c(43581),_=c(86625),C=c.n(_),p=c(85008),P=c(85893),w=function(D){var U=D.width,b=D.height,G=(0,R.tT)("user"),B=G.avatar;return(0,P.jsxs)("div",{className:C().avatarContainer,children:[!B&&(0,P.jsx)("div",{className:C().uploadMask,children:(0,P.jsx)(p.Z,{className:C().icon})}),(0,P.jsx)(S.Z,{src:B||"/images/logo-square-core.svg",className:C().avatar,preview:!1,fallback:"/images/logo-square-core.svg",width:U||200,height:b||200})]})};Y.Z=w},44729:function(M,Y,c){"use strict";var mt=c(71194),S=c(48889),Q=c(67294),R=c(55133),_=c.n(R),C=c(85893),p=function(w){var F=w.visable,D=w.content,U=w.footer;return(0,C.jsx)(S.Z,{title:!1,closable:!1,className:_().modal,centered:!0,visible:F,width:650,footer:U,children:D})};Y.Z=p},3548:function(M,Y,c){"use strict";var mt=c(67294),S=c(31639),Q=c.n(S),R=c(96534),_=c(85893),C=function(P){var w=P.value;return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:Q().did,children:[(0,R.MP)(w),(0,_.jsx)("span",{className:Q().unit,children:"\xA0AD3"})]})})};Y.Z=C},57651:function(M,Y,c){"use strict";var mt=c(67294),S=c(31639),Q=c.n(S),R=c(96534),_=c(85893),C=function(P){var w=P.value,F=P.symbol;return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:Q().did,children:[(0,R.MP)(w),F&&(0,_.jsxs)("span",{className:Q().unit,children:["\xA0",F]})]})})};Y.Z=C},2207:function(M,Y,c){"use strict";c.r(Y),c.d(Y,{default:function(){return Bi}});var mt=c(57663),S=c(71577),Q=c(58024),R=c(39144),_=c(2824),C=c(67294),p=c(94184),P=c.n(p),w=c(43581),F=c(55909),D=c.n(F),U=c(4155),b=c.n(U),G=c(68628),B=c(29148),J=c(21059),Z=c(12044),I=c(62965),et=c(20228),ot=c(11382),De=c(84494),xt=c(44025),Zi=c(34792),ee=c(48086),At=c(3182),be=c(94043),it=c.n(be),ie=c(69764),Ae=c(7789),Ie=c(62298),wt=c(51625),Ee=c(73627),It=c.n(Ee),je=c(47193),Pe=c(46656),Et=c(96534),se=c(99141),ae=c(15977),d=c(85893),Oe=localStorage.getItem("controllerKeystore"),ze=function(e){var s=e.setModalVisable,i=(0,C.useState)(""),a=(0,_.Z)(i,2),n=a[0],r=a[1],l=(0,C.useState)(!1),h=(0,_.Z)(l,2),o=h[0],u=h[1],f=(0,C.useState)(),m=(0,_.Z)(f,2),g=m[0],x=m[1],z=(0,C.useState)(!1),T=(0,_.Z)(z,2),H=T[0],V=T[1],A=(0,w.YB)(),rt=function(){var $=(0,At.Z)(it().mark(function ft(gt){var St;return it().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:gt.event&&(St=localStorage.getItem("did"),St===null&&w.m8.push(wt.Z.page.createPage),(0,je.Z)(URL.createObjectURL(gt.file.originFileObj),"","",St).then(function(){var Ri=(0,At.Z)(it().mark(function Me(Fi){var Se;return it().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:Se=Fi.substring(22),x((0,Et.Mi)(Se,"image/png"));case 2:case"end":return te.stop()}},Me)}));return function(Me){return Ri.apply(this,arguments)}}()));case 1:case"end":return Dt.stop()}},ft)}));return function(gt){return $.apply(this,arguments)}}(),lt=function(){var $=(0,At.Z)(it().mark(function ft(){var gt;return it().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(g){N.next=3;break}return ee.default.error(A.formatMessage({id:"error.avatar.empty"})),N.abrupt("return");case 3:return V(!0),N.prev=4,N.next=7,(0,se.U)(g);case 7:return gt=N.sent,N.next=10,(0,se.g)("ipfs://".concat(gt.Hash),n,Oe);case 10:s(!1),N.next=16;break;case 13:N.prev=13,N.t0=N.catch(4),ee.default.error(N.t0.message);case 16:V(!1);case 17:case"end":return N.stop()}},ft,null,[[4,13]])}));return function(){return $.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ot.Z,{tip:A.formatMessage({id:"common.uploading"}),spinning:H,children:(0,d.jsxs)("div",{className:It().avatarEdit,children:[(0,d.jsx)(ae.Z,{width:200,height:200}),(0,d.jsx)("span",{className:It().avatarSaveDesc,children:A.formatMessage({id:"wallet.avatar.saveDesc"})}),(0,d.jsxs)("div",{className:It().buttons,children:[(0,d.jsx)(Ae.Z,{zoom:!0,rotate:!0,quality:1,modalTitle:A.formatMessage({id:"wallet.avatar.uploadAvatar"}),onModalOk:function(){u(!0)},children:(0,d.jsx)(xt.Z,{accept:"image/*",showUploadList:!1,onChange:rt,children:(0,d.jsx)(S.Z,{block:!0,type:"primary",size:"large",shape:"round",icon:(0,d.jsx)(Ie.Z,{}),className:It().button,children:A.formatMessage({id:"wallet.avatar.upload"})})})}),(0,d.jsx)(S.Z,{block:!0,size:"large",shape:"round",className:It().button,onClick:function(){s(!1)},children:A.formatMessage({id:"common.close"})})]})]})}),(0,d.jsx)(Pe.Z,{visable:o,setVisable:u,password:n,setPassword:r,func:lt})]})},Ne=function(e){var s=e.modalVisable,i=e.setModalVisable,a=(0,w.YB)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(ie.Z,{visable:s,title:a.formatMessage({id:"wallet.avatar.edit"}),content:(0,d.jsx)(ze,{setModalVisable:i}),footer:!1})})},Be=function(){var e=(0,C.useState)(!1),s=(0,_.Z)(e,2),i=s[0],a=s[1];return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{onClick:function(){a(!0)},children:(0,d.jsx)(ae.Z,{width:200,height:200})}),(0,d.jsx)(Ne,{modalVisable:i,setModalVisable:a})]})},Re=Be,Fe=c(59367),O=c.n(Fe),Ze=c(44729),jt=c(3548),Le=function(){var e=(0,C.useState)(!1),s=(0,_.Z)(e,2),i=s[0],a=s[1],n=(0,w.tT)("balance"),r=n.controller,l=n.stash,h=(0,w.YB)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:O().balanceCard,children:[(0,d.jsx)(Re,{}),(0,d.jsxs)("div",{className:O().totalBalance,children:[(0,d.jsx)("div",{className:O().amount,children:(0,d.jsx)(jt.Z,{value:l==null?void 0:l.total})}),(0,d.jsxs)("div",{className:O().availableBalance,children:[h.formatMessage({id:"wallet.balance.availableBalance"}),": ",(0,d.jsx)(jt.Z,{value:l==null?void 0:l.free}),(0,d.jsx)(G.Z,{style:{marginLeft:10},onClick:function(){a(!0)}})]})]}),(0,d.jsxs)("div",{className:O().buttons,children:[(0,d.jsxs)("div",{className:O().button,onClick:function(){w.m8.push(wt.Z.page.sendPage)},children:[(0,d.jsx)(S.Z,{type:"primary",shape:"circle",icon:(0,d.jsx)(B.Z,{}),size:"large",className:O().buttonContent}),(0,d.jsx)("small",{children:h.formatMessage({id:"wallet.balance.send"})})]}),(0,d.jsxs)("div",{className:O().button,onClick:function(){w.m8.push(wt.Z.page.receivePage)},children:[(0,d.jsx)(S.Z,{type:"primary",shape:"circle",icon:(0,d.jsx)(J.Z,{}),size:"large",className:O().buttonContent}),(0,d.jsx)("small",{children:h.formatMessage({id:"wallet.balance.receive"})})]}),(0,d.jsxs)("div",{className:O().button,onClick:function(){w.m8.push(wt.Z.page.buyPage)},children:[(0,d.jsx)(S.Z,{type:"primary",shape:"circle",icon:(0,d.jsx)(Z.Z,{}),size:"large",className:O().buttonContent}),(0,d.jsx)("small",{children:h.formatMessage({id:"wallet.balance.buy"})})]}),(0,d.jsxs)("div",{className:O().button,onClick:function(){w.m8.push(wt.Z.page.chargePage)},children:[(0,d.jsx)(S.Z,{type:"primary",shape:"circle",icon:(0,d.jsx)(I.Z,{}),size:"large",className:O().buttonContent}),(0,d.jsx)("small",{children:h.formatMessage({id:"wallet.balance.rechargeFee"})})]})]}),(0,d.jsxs)("div",{className:O().otherBalance,children:[(0,d.jsxs)("div",{className:O().field,children:[(0,d.jsx)("span",{className:O().name,children:h.formatMessage({id:"wallet.balance.gas"})}),(0,d.jsx)("span",{className:O().value,children:(0,d.jsx)(jt.Z,{value:r==null?void 0:r.free})})]}),(0,d.jsxs)("div",{className:O().field,children:[(0,d.jsx)("span",{className:O().name,children:h.formatMessage({id:"wallet.balance.reservedBalance"})}),(0,d.jsx)("span",{className:O().value,children:(0,d.jsx)(jt.Z,{value:l==null?void 0:l.reserved})})]})]})]}),(0,d.jsx)(Ze.Z,{visable:i,content:h.formatMessage({id:"wallet.balance.availableBalance.tip"}),footer:(0,d.jsx)(S.Z,{block:!0,size:"large",shape:"round",onClick:function(){a(!1)},children:h.formatMessage({id:"common.close"})})})]})},We=Le,Li=c(54029),Ue=c(79166),Wi=c(12968),ke=c(62462),ne=c(43002),Ke=c(88607),vt=c.n(Ke),re=c(57651),He=function(){var e=(0,w.tT)("assets"),s=e.assetsArr,i=(0,w.YB)(),a=function(){var n=(0,At.Z)(it().mark(function r(l){var h;return it().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,ne.yI)(l);case 2:h=u.sent,w.m8.push("/".concat((0,Et.st)(h)));case 4:case"end":return u.stop()}},r)}));return function(l){return n.apply(this,arguments)}}();return(0,d.jsxs)("div",{className:vt().assetsList,children:[s.length===0&&(0,d.jsxs)("div",{className:vt().noAssets,children:[(0,d.jsx)("img",{src:"/images/icon/query.svg",className:vt().topImage}),(0,d.jsx)("span",{children:i.formatMessage({id:"wallet.assets.empty"})})]}),s.map(function(n){return(0,d.jsx)(Ue.Z,{count:i.formatMessage({id:"wallet.assets.earnMore"}),offset:[-20,0],children:(0,d.jsx)("div",{className:vt().field,onClick:function(){a(n==null?void 0:n.id)},children:(0,d.jsxs)("div",{className:vt().title,children:[(0,d.jsxs)("span",{className:vt().name,children:[(0,d.jsx)(ke.Z,{className:vt().icon,src:(n==null?void 0:n.icon)||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),n==null?void 0:n.token]}),(0,d.jsxs)("span",{className:vt().price,style:{display:"flex",flexDirection:"column",alignItems:"end",justifyContent:"center",textAlign:"right"},children:[(0,d.jsx)("span",{style:{marginBottom:10},children:(0,d.jsx)(re.Z,{value:n==null?void 0:n.balance,symbol:n==null?void 0:n.symbol})}),(0,d.jsx)("small",{children:(0,d.jsx)(jt.Z,{value:n==null?void 0:n.ad3})})]})]})})})})]})},Ve=He,Ui=c(87593),le=c(37636),ki=c(22385),Ye=c(31097),Ki=c(17462),oe=c(76772),Hi=c(402),Yt=c(59289),Ge=c(26180),st=c.n(Ge),Xe=c(8158),$e=c(55035),Qe=c(94e3),Je=Yt.Z.Title,qe=function(e){var s=e.content;return(0,d.jsx)(oe.Z,{style:{marginBottom:24},message:s,type:"error",showIcon:!0})},ti=function(){var e=(0,C.useState)({}),s=(0,_.Z)(e,2),i=s[0],a=s[1],n=(0,C.useState)([]),r=(0,_.Z)(n,2),l=r[0],h=r[1],o=(0,w.YB)(),u=localStorage.getItem("did"),f=function(){var m=(0,At.Z)(it().mark(function g(){var x;return it().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,T.next=3,(0,ne.US)(u);case 3:x=T.sent,h(x),T.next=10;break;case 7:T.prev=7,T.t0=T.catch(0),a({Type:"chain error",Message:T.t0.message});case 10:case 11:case"end":return T.stop()}},g,null,[[0,7]])}));return function(){return m.apply(this,arguments)}}();return(0,C.useEffect)(function(){f()},[]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:st().recordList,children:[(0,d.jsx)(Je,{level:4,children:o.formatMessage({id:"wallet.recordlist.title"})}),i.Message&&(0,d.jsx)(qe,{content:i.Message}),(0,d.jsx)(le.Z,{className:st().timeline,children:l.map(function(m,g){return g>=10?null:(0,d.jsx)(le.Z.Item,{color:m.fromDid===u?"red":"green",dot:m.fromDid===u?(0,d.jsx)($e.Z,{}):(0,d.jsx)(Qe.Z,{}),className:st().timelineItem,children:(0,d.jsxs)("div",{className:st().body,children:[(0,d.jsxs)("div",{className:st().left,children:[(0,d.jsxs)("div",{className:st().desc,children:[m.fromDid===u?"-":"+",(0,d.jsx)(re.Z,{value:m.amount,symbol:m.assetSymbol})]}),(0,d.jsxs)("div",{className:st().receiver,children:["hash:",m.block]})]}),(0,d.jsxs)("div",{className:st().right,children:[(0,d.jsxs)("div",{className:st().address,children:[(0,d.jsx)(Ye.Z,{placement:"topLeft",title:(0,Et.ki)(m,u),children:(0,Et.ki)(m,u)}),(0,Et.ki)(m,u)]}),(0,d.jsx)("div",{className:st().time,children:(0,d.jsx)(Xe.Z,{dateSeparator:"/",timeSeparator:":",format:"YMD",children:m.timestampInSecond})})]})]})},m.timestampInSecond)})}),(0,d.jsx)(S.Z,{block:!0,size:"large",shape:"round",type:"primary",ghost:!0,onClick:function(){w.m8.push(wt.Z.page.recordPage)},children:o.formatMessage({id:"wallet.recordlist.all"})})]})})},ei=ti,ii=c(8212),si=c(15004),Gt=c.n(si),ai=Yt.Z.Title,ni=function(){var e=(0,C.useState)(),s=(0,_.Z)(e,2),i=s[0],a=s[1],n=(0,C.useState)(!1),r=(0,_.Z)(n,2),l=r[0],h=r[1],o=(0,C.useState)(!1),u=(0,_.Z)(o,2),f=u[0],m=u[1],g=(0,w.YB)();return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:Gt().guide,children:[(0,d.jsx)(oe.Z,{message:g.formatMessage({id:"wallet.guide.description"}),type:"info"}),(0,d.jsx)("div",{className:Gt().avatar,onClick:function(){h(!0)},children:(0,d.jsx)("img",{src:i||"/images/logo-square-core.svg"})}),(0,d.jsxs)(ai,{level:2,style:{textAlign:"center",marginTop:30,marginBottom:50},children:["Nickname",(0,d.jsx)(ii.Z,{style:{marginLeft:10},onClick:function(){m(!0)}})]}),(0,d.jsx)(S.Z,{block:!0,type:"primary",shape:"round",size:"large",className:Gt().button,onClick:function(){},children:g.formatMessage({id:"common.continue"})})]})})},ri=ni,li=c(39545),oi=c.n(li),ht,Pt,ut=Math.abs,dt=Math.sin,q=Math.cos,k=Math.max,K=Math.min,he=Math.ceil,Ot=Math.sqrt,yt=Math.pow,Rt={},zt={},Xt={0:"0,",1:"17,",2:"34,",3:"51,",4:"68,",5:"85,",6:"102,",7:"119,",8:"136,",9:"153,",a:"170,",A:"170,",b:"187,",B:"187,",c:"204,",C:"204,",d:"221,",D:"221,",e:"238,",E:"238,",f:"255,",F:"255,"},L,E,y,$t,bt,Ft,Zt,j=document,Ct,X={};for(ht=0;ht<256;++ht)Pt=ht.toString(16),ht<16&&(Pt="0"+Pt),zt[Pt]=zt[Pt.toUpperCase()]=ht.toString()+",";function at(t){return typeof t!="undefined"}function Nt(t){return typeof t=="object"&&t!=null}function Lt(t,e,s){return isNaN(t)?s:K(s,k(e,t))}function _t(){return!1}function ct(){return new Date().valueOf()}function hi(t,e){var s=[],i=t.length,a;for(a=0;a<i;++a)s.push(t[a]);return s.sort(e),s}function ue(t){for(var e=t.length-1,s,i;e;)i=~~(Math.random()*e),s=t[e],t[e]=t[i],t[i]=s,--e}function pt(t,e,s){this.x=t,this.y=e,this.z=s}bt=pt.prototype,bt.length=function(){return Ot(this.x*this.x+this.y*this.y+this.z*this.z)},bt.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},bt.cross=function(t){var e=this.y*t.z-this.z*t.y,s=this.z*t.x-this.x*t.z,i=this.x*t.y-this.y*t.x;return new pt(e,s,i)},bt.angle=function(t){var e=this.dot(t),s;return e==0?Math.PI/2:(s=e/(this.length()*t.length()),s>=1?0:s<=-1?Math.PI:Math.acos(s))},bt.unit=function(){var t=this.length();return new pt(this.x/t,this.y/t,this.z/t)};function ui(t,e){e=e*Math.PI/180,t=t*Math.PI/180;var s=dt(t)*q(e),i=-dt(e),a=-q(t)*q(e);return new pt(s,i,a)}function nt(t){this[1]={1:t[0],2:t[1],3:t[2]},this[2]={1:t[3],2:t[4],3:t[5]},this[3]={1:t[6],2:t[7],3:t[8]}}$t=nt.prototype,nt.Identity=function(){return new nt([1,0,0,0,1,0,0,0,1])},nt.Rotation=function(t,e){var s=dt(t),i=q(t),a=1-i;return new nt([i+yt(e.x,2)*a,e.x*e.y*a-e.z*s,e.x*e.z*a+e.y*s,e.y*e.x*a+e.z*s,i+yt(e.y,2)*a,e.y*e.z*a-e.x*s,e.z*e.x*a-e.y*s,e.z*e.y*a+e.x*s,i+yt(e.z,2)*a])},$t.mul=function(t){var e=[],s,i,a=t.xform?1:0;for(s=1;s<=3;++s)for(i=1;i<=3;++i)a?e.push(this[s][1]*t[1][i]+this[s][2]*t[2][i]+this[s][3]*t[3][i]):e.push(this[s][i]*t);return new nt(e)},$t.xform=function(t){var e={},s=t.x,i=t.y,a=t.z;return e.x=s*this[1][1]+i*this[2][1]+a*this[3][1],e.y=s*this[1][2]+i*this[2][2]+a*this[3][2],e.z=s*this[1][3]+i*this[2][3]+a*this[3][3],e};function di(t,e,s,i,a){var n,r,l,h,o=[],u=2/t,f;for(f=Math.PI*(3-Ot(5)+(parseFloat(a)?parseFloat(a):0)),n=0;n<t;++n)r=n*u-1+u/2,l=Ot(1-r*r),h=n*f,o.push([q(h)*l*e,r*s,dt(h)*l*i]);return o}function de(t,e,s,i,a,n){var r,l=[],h=2/t,o,u,f,m,g;for(o=Math.PI*(3-Ot(5)+(parseFloat(n)?parseFloat(n):0)),u=0;u<t;++u)f=u*h-1+h/2,r=u*o,m=q(r),g=dt(r),l.push(e?[f*s,m*i,g*a]:[m*s,f*i,g*a]);return l}function ce(t,e,s,i,a,n){var r,l=[],h=Math.PI*2/e,o,u,f;for(o=0;o<e;++o)r=o*h,u=q(r),f=dt(r),l.push(t?[n*s,u*i,f*a]:[u*s,n*i,f*a]);return l}function ci(t,e,s,i,a){return de(t,0,e,s,i,a)}function fi(t,e,s,i,a){return de(t,1,e,s,i,a)}function gi(t,e,s,i,a){return a=isNaN(a)?0:a*1,ce(0,t,e,s,i,a)}function mi(t,e,s,i,a){return a=isNaN(a)?0:a*1,ce(1,t,e,s,i,a)}function vi(t){var e=new Image;e.onload=function(){var s=e.width/2,i=e.height/2;t.centreFunc=function(a,n,r,l,h){a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,a.drawImage(e,l-s,h-i)}},e.src=t.centreImage}function pi(t,e){var s=t,i,a,n=(e*1).toPrecision(3)+")";return t[0]==="#"?(Rt[t]||(t.length===4?Rt[t]="rgba("+Xt[t[1]]+Xt[t[2]]+Xt[t[3]]:Rt[t]="rgba("+zt[t.substr(1,2)]+zt[t.substr(3,2)]+zt[t.substr(5,2)]),s=Rt[t]+n):t.substr(0,4)==="rgb("||t.substr(0,4)==="hsl("?s=t.replace("(","a(").replace(")",","+n):(t.substr(0,5)==="rgba("||t.substr(0,5)==="hsla(")&&(i=t.lastIndexOf(",")+1,a=t.indexOf(")"),e*=parseFloat(t.substring(i,a)),s=t.substr(0,i)+e.toPrecision(3)+")"),s}function tt(t,e){if(window.G_vmlCanvasManager)return null;var s=j.createElement("canvas");return s.width=t,s.height=e,s}function xi(){var t=tt(3,3),e,s;return t?(e=t.getContext("2d"),e.strokeStyle="#000",e.shadowColor="#fff",e.shadowBlur=3,e.globalAlpha=0,e.strokeRect(2,2,2,2),e.globalAlpha=1,s=e.getImageData(2,2,1,1),t=null,s.data[0]>0):!1}function wi(t,e,s,i){var a=t.createLinearGradient(0,0,e,0),n;for(n in i)a.addColorStop(1-n,i[n]);t.fillStyle=a,t.fillRect(0,s,e,1)}function Wt(t,e,s){var i=1024,a=1,n=t.weightGradient,r,l,h,o;if(t.gCanvas)l=t.gCanvas.getContext("2d"),a=t.gCanvas.height;else{if(Nt(n[0])?a=n.length:n=[n],t.gCanvas=r=tt(i,a),!r)return null;for(l=r.getContext("2d"),h=0;h<a;++h)wi(l,i,h,n[h])}return s=k(K(s||0,a-1),0),o=l.getImageData(~~((i-1)*e),s,1,1).data,"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]/255+")"}function fe(t,e,s,i,a,n,r,l,h,o,u,f){var m=a+(l||0)+(h.length&&h[0]<0?ut(h[0]):0),g=n+(l||0)+(h.length&&h[1]<0?ut(h[1]):0),x,z;for(t.font=e,t.textBaseline="top",t.fillStyle=s,r&&(t.shadowColor=r),l&&(t.shadowBlur=l),h.length&&(t.shadowOffsetX=h[0],t.shadowOffsetY=h[1]),x=0;x<i.length;++x)z=0,u&&(f=="right"?z=o-u[x]:f=="centre"&&(z=(o-u[x])/2)),t.fillText(i[x],m+z,g),g+=parseInt(e)}function Tt(t,e,s,i,a,n,r){n?(t.beginPath(),t.moveTo(e,s+a-n),t.arcTo(e,s,e+n,s,n),t.arcTo(e+i,s,e+i,s+n,n),t.arcTo(e+i,s+a,e+i-n,s+a,n),t.arcTo(e,s+a,e,s+a-n,n),t.closePath(),t[r?"stroke":"fill"]()):t[r?"strokeRect":"fillRect"](e,s,i,a)}function Qt(t,e,s,i,a,n,r,l,h){this.strings=t,this.font=e,this.width=s,this.height=i,this.maxWidth=a,this.stringWidths=n,this.align=r,this.valign=l,this.scale=h}Zt=Qt.prototype,Zt.SetImage=function(t,e,s,i,a,n,r,l){this.image=t,this.iwidth=e*this.scale,this.iheight=s*this.scale,this.ipos=i,this.ipad=a*this.scale,this.iscale=l,this.ialign=n,this.ivalign=r},Zt.Align=function(t,e,s){var i=0;return s=="right"||s=="bottom"?i=e-t:s!="left"&&s!="top"&&(i=(e-t)/2),i},Zt.Create=function(t,e,s,i,a,n,r,l,h){var o,u,f,m,g,x,z,T,H,V,A,rt,lt,$,ft,gt=ut(r[0]),St=ut(r[1]),N,Dt;return l=k(l,gt+n,St+n),g=2*(l+i),z=2*(l+i),u=this.width+g,f=this.height+z,H=V=l+i,this.image&&(A=rt=l+i,lt=this.iwidth,$=this.iheight,this.ipos=="top"||this.ipos=="bottom"?(lt<this.width?A+=this.Align(lt,this.width,this.ialign):H+=this.Align(this.width,lt,this.align),this.ipos=="top"?V+=$+this.ipad:rt+=this.height+this.ipad,u=k(u,lt+g),f+=$+this.ipad):($<this.height?rt+=this.Align($,this.height,this.ivalign):V+=this.Align(this.height,$,this.valign),this.ipos=="right"?A+=this.width+this.ipad:H+=lt+this.ipad,u+=lt+this.ipad,f=k(f,$+z))),o=tt(u,f),o?(g=z=i/2,x=u-i,T=f-i,ft=K(h,x/2,T/2),m=o.getContext("2d"),e&&(m.fillStyle=e,Tt(m,g,z,x,T,ft)),i&&(m.strokeStyle=s,m.lineWidth=i,Tt(m,g,z,x,T,ft,!0)),(n||gt||St)&&(N=tt(u,f),N&&(Dt=m,m=N.getContext("2d"))),fe(m,this.font,t,this.strings,H,V,0,0,[],this.maxWidth,this.stringWidths,this.align),this.image&&m.drawImage(this.image,A,rt,lt,$),Dt&&(m=Dt,a&&(m.shadowColor=a),n&&(m.shadowBlur=n),m.shadowOffsetX=r[0],m.shadowOffsetY=r[1],m.drawImage(N,0,0)),o):null};function Ut(t,e,s){var i=tt(e,s),a;return i?(a=i.getContext("2d"),a.drawImage(t,(e-t.width)/2,(s-t.height)/2),i):null}function Jt(t,e,s){var i=tt(e,s),a;return i?(a=i.getContext("2d"),a.drawImage(t,0,0,e,s),i):null}function ge(t,e,s,i,a,n,r,l,h,o){var u=e+(2*l+n)*i,f=s+(2*l+n)*i,m=tt(u,f),g,x,z,T,H,V,A,rt;return m?(n*=i,h*=i,x=z=n/2,T=u-n,H=f-n,l=l*i+x,g=m.getContext("2d"),rt=K(h,T/2,H/2),a&&(g.fillStyle=a,Tt(g,x,z,T,H,rt)),n&&(g.strokeStyle=r,g.lineWidth=n,Tt(g,x,z,T,H,rt,!0)),o?(V=tt(u,f),A=V.getContext("2d"),A.drawImage(t,l,l,e,s),A.globalCompositeOperation="source-in",A.fillStyle=r,A.fillRect(0,0,u,f),A.globalCompositeOperation="destination-over",A.drawImage(m,0,0),A.globalCompositeOperation="source-over",g.drawImage(V,0,0)):g.drawImage(t,l,l,t.width,t.height),{image:m,width:u/i,height:f/i}):null}function yi(t,e,s,i,a){var n,r,l=parseFloat(e),h=k(s,i);return n=tt(s,i),n?(e.indexOf("%")>0?l=h*l/100:l=l*a,r=n.getContext("2d"),r.globalCompositeOperation="source-over",r.fillStyle="#fff",l>=h/2?(l=K(s,i)/2,r.beginPath(),r.moveTo(s/2,i/2),r.arc(s/2,i/2,l,0,2*Math.PI,!1),r.fill(),r.closePath()):(l=K(s/2,i/2,l),Tt(r,0,0,s,i,l,!0),r.fill()),r.globalCompositeOperation="source-in",r.drawImage(t,0,0,s,i),n):null}function Ci(t,e,s,i,a,n,r){var l=ut(r[0]),h=ut(r[1]),o=e+(l>n?l+n:n*2)*i,u=s+(h>n?h+n:n*2)*i,f=i*((n||0)+(r[0]<0?l:0)),m=i*((n||0)+(r[1]<0?h:0)),g,x;return g=tt(o,u),g?(x=g.getContext("2d"),a&&(x.shadowColor=a),n&&(x.shadowBlur=n*i),r&&(x.shadowOffsetX=r[0]*i,x.shadowOffsetY=r[1]*i),x.drawImage(t,f,m,e,s),{image:g,width:o/i,height:u/i}):null}function me(t,e,s){var i=parseInt(t.toString().length*s),a=parseInt(s*2*t.length),n=tt(i,a),r,l,h,o,u,f,m,g;if(!n)return null;for(r=n.getContext("2d"),r.fillStyle="#000",r.fillRect(0,0,i,a),fe(r,s+"px "+e,"#fff",t,0,0,0,0,[],"centre"),l=r.getImageData(0,0,i,a),h=l.width,o=l.height,g={min:{x:h,y:o},max:{x:-1,y:-1}},f=0;f<o;++f)for(u=0;u<h;++u)m=(f*h+u)*4,l.data[m+1]>0&&(u<g.min.x&&(g.min.x=u),u>g.max.x&&(g.max.x=u),f<g.min.y&&(g.min.y=f),f>g.max.y&&(g.max.y=f));return h!=i&&(g.min.x*=i/h,g.max.x*=i/h),o!=a&&(g.min.y*=i/o,g.max.y*=i/o),n=null,g}function qt(t){return"'"+t.replace(/(\'|\")/g,"").replace(/\s*,\s*/g,"', '")+"'"}function Bt(t,e,s){s=s||j,s.addEventListener?s.addEventListener(t,e,!1):s.attachEvent("on"+t,e)}function _i(t,e,s){s=s||j,s.removeEventListener?s.removeEventListener(t,e):s.detachEvent("on"+t,e)}function kt(t,e,s,i){var a=i.imageScale,n,r,l,h,o,u;if(!e.complete)return Bt("load",function(){kt(t,e,s,i)},e);if(!t.complete)return Bt("load",function(){kt(t,e,s,i)},t);e.width=e.width,e.height=e.height,a&&(t.width=e.width*a,t.height=e.height*a),s.iw=t.width,s.ih=t.height,i.txtOpt&&(r=t,n=i.zoomMax*i.txtScale,o=s.iw*n,u=s.ih*n,o<e.naturalWidth||u<e.naturalHeight?(r=Jt(t,o,u),r&&(s.fimage=r)):(o=s.iw,u=s.ih,n=1),parseFloat(i.imageRadius)&&(s.image=s.fimage=t=yi(s.image,i.imageRadius,o,u,n)),s.HasText()||(i.shadow&&(r=Ci(s.image,o,u,n,i.shadow,i.shadowBlur,i.shadowOffset),r&&(s.fimage=r.image,s.w=r.width,s.h=r.height)),(i.bgColour||i.bgOutlineThickness)&&(l=i.bgColour=="tag"?W(s.a,"background-color"):i.bgColour,h=i.bgOutline=="tag"?W(s.a,"color"):i.bgOutline||i.textColour,o=s.fimage.width,u=s.fimage.height,i.outlineMethod=="colour"&&(r=ge(s.fimage,o,u,n,l,i.bgOutlineThickness,s.outline.colour,i.padding,i.bgRadius,1),r&&(s.oimage=r.image)),r=ge(s.fimage,o,u,n,l,i.bgOutlineThickness,h,i.padding,i.bgRadius),r&&(s.fimage=r.image,s.w=r.width,s.h=r.height)),i.outlineMethod=="size"&&(i.outlineIncrease>0?(s.iw+=2*i.outlineIncrease,s.ih+=2*i.outlineIncrease,o=n*s.iw,u=n*s.ih,r=Jt(s.fimage,o,u),s.oimage=r,s.fimage=Ut(s.fimage,s.oimage.width,s.oimage.height)):(o=n*(s.iw+2*i.outlineIncrease),u=n*(s.ih+2*i.outlineIncrease),r=Jt(s.fimage,o,u),s.oimage=Ut(r,s.fimage.width,s.fimage.height))))),s.Init()}function W(t,e){var s=j.defaultView,i=e.replace(/\-([a-z])/g,function(a){return a.charAt(1).toUpperCase()});return s&&s.getComputedStyle&&s.getComputedStyle(t,null).getPropertyValue(e)||t.currentStyle&&t.currentStyle[i]}function Ti(t,e,s){var i=1,a;return e?i=1*(t.getAttribute(e)||s):(a=W(t,"font-size"))&&(i=a.indexOf("px")>-1&&a.replace("px","")*1||a.indexOf("pt")>-1&&a.replace("pt","")*1.25||a.indexOf("rem")>-1&&a.replace("rem","")*2||a*3.3),i}function Mt(t){return t.target&&at(t.target.id)?t.target.id:t.srcElement.parentNode.id}function Kt(t,e){var s,i,a=parseInt(W(e,"width"))/e.width,n=parseInt(W(e,"height"))/e.height;return at(t.offsetX)?s={x:t.offsetX,y:t.offsetY}:(i=ye(e.id),at(t.changedTouches)&&(t=t.changedTouches[0]),t.pageX&&(s={x:t.pageX-i.x,y:t.pageY-i.y})),s&&a&&n&&(s.x/=a,s.y/=n),s}function Mi(t){var e=t.target||t.fromElement.parentNode,s=v.tc[e.id];s&&(s.mx=s.my=-1,s.UnFreeze(),s.EndDrag())}function ve(t){var e,s=v,i,a,n=Mt(t);for(e in s.tc)i=s.tc[e],i.tttimer&&(clearTimeout(i.tttimer),i.tttimer=null);n&&s.tc[n]&&(i=s.tc[n],(a=Kt(t,i.canvas))&&(i.mx=a.x,i.my=a.y,i.Drag(t,a)),i.drawn=0)}function Si(t){var e=v,s=j.addEventListener?0:1,i=Mt(t);i&&t.button==s&&e.tc[i]&&e.tc[i].BeginDrag(t)}function Di(t){var e=v,s=j.addEventListener?0:1,i=Mt(t),a;i&&t.button==s&&e.tc[i]&&(a=e.tc[i],ve(t),!a.EndDrag()&&!a.touchState&&a.Clicked(t))}function bi(t){var e=Mt(t),s=e&&v.tc[e],i;s&&t.changedTouches&&(t.touches.length==1&&s.touchState==0?(s.touchState=1,s.BeginDrag(t),(i=Kt(t,s.canvas))&&(s.mx=i.x,s.my=i.y,s.drawn=0)):t.targetTouches.length==2&&s.pinchZoom?(s.touchState=3,s.EndDrag(),s.BeginPinch(t)):(s.EndDrag(),s.EndPinch(),s.touchState=0))}function pe(t){var e=Mt(t),s=e&&v.tc[e];if(s&&t.changedTouches){switch(s.touchState){case 1:s.Draw(),s.Clicked();break;case 2:s.EndDrag();break;case 3:s.EndPinch()}s.touchState=0}}function Ai(t){var e,s=v,i,a,n=Mt(t);for(e in s.tc)i=s.tc[e],i.tttimer&&(clearTimeout(i.tttimer),i.tttimer=null);if(i=n&&s.tc[n],i&&t.changedTouches&&i.touchState){switch(i.touchState){case 1:case 2:(a=Kt(t,i.canvas))&&(i.mx=a.x,i.my=a.y,i.Drag(t,a)&&(i.touchState=2));break;case 3:i.Pinch(t)}i.drawn=0}}function xe(t){var e=v,s=Mt(t);s&&e.tc[s]&&(t.cancelBubble=!0,t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.tc[s].Wheel((t.wheelDelta||t.detail)>0))}function Ii(t){var e,s=v;clearTimeout(s.scrollTimer);for(e in s.tc)s.tc[e].Pause();s.scrollTimer=setTimeout(function(){var i,a=v;for(i in a.tc)a.tc[i].Resume()},s.scrollPause)}function Ei(){we(ct())}function we(t){var e=v.tc,s;v.NextFrame(v.interval),t=t||ct();for(s in e)e[s].Draw(t)}function ye(t){var e=j.getElementById(t),s=e.getBoundingClientRect(),i=j.documentElement,a=j.body,n=window,r=n.pageXOffset||i.scrollLeft,l=n.pageYOffset||i.scrollTop,h=i.clientLeft||a.clientLeft,o=i.clientTop||a.clientTop;return{x:s.left+r-h,y:s.top+l-o}}function ji(t,e,s,i){var a=t.radius*t.z1/(t.z1+t.z2+e.z);return{x:e.x*a*s,y:e.y*a*i,z:e.z,w:(t.z1-e.z)/t.z2}}function Ce(t){this.e=t,this.br=0,this.line=[],this.text=[],this.original=t.innerText||t.textContent}Ft=Ce.prototype,Ft.Empty=function(){for(var t=0;t<this.text.length;++t)if(this.text[t].length)return!1;return!0},Ft.Lines=function(t){var e=t?1:0,s,i,a;for(t=t||this.e,s=t.childNodes,i=s.length,a=0;a<i;++a)s[a].nodeName=="BR"?(this.text.push(this.line.join(" ")),this.br=1):s[a].nodeType==3?this.br?(this.line=[s[a].nodeValue],this.br=0):this.line.push(s[a].nodeValue):this.Lines(s[a]);return e||this.br||this.text.push(this.line.join(" ")),this.text},Ft.SplitWidth=function(t,e,s,i){var a,n,r,l=[];for(e.font=i+"px "+s,a=0;a<this.text.length;++a){for(r=this.text[a].split(/\s+/),this.line=[r[0]],n=1;n<r.length;++n)e.measureText(this.line.join(" ")+" "+r[n]).width>t?(l.push(this.line.join(" ")),this.line=[r[n]]):this.line.push(r[n]);l.push(this.line.join(" "))}return this.text=l};function _e(t,e){if(this.ts=null,this.tc=t,this.tag=e,console.log("t",e),this.x=this.y=this.w=this.h=this.sc=1,this.z=0,this.pulse=1,this.pulsate=t.pulsateTo<1,this.colour=t.outlineColour,this.adash=~~t.outlineDash,this.adash==-1){var s=W(e.a,"border-width");this.adash=s.substring(0,s.length-2)}this.agap=~~t.outlineDashSpace||this.adash,this.aspeed=t.outlineDashSpeed*1,this.colour=="tag"?this.colour=W(e.a,"color"):this.colour=="tagbg"&&(this.colour=W(e.a,"background-color")),this.Draw=this.pulsate?this.DrawPulsate:this.DrawSimple,this.radius=t.outlineRadius|0,this.SetMethod(t.outlineMethod)}L=_e.prototype,L.SetMethod=function(t){var e={block:["PreDraw","DrawBlock"],colour:["PreDraw","DrawColour"],outline:["PostDraw","DrawOutline"],classic:["LastDraw","DrawOutline"],size:["PreDraw","DrawSize"],none:["LastDraw"]},s=e[t]||e.outline;t=="none"?this.Draw=function(){return 1}:this.drawFunc=this[s[1]],this[s[0]]=this.Draw},L.Update=function(t,e,s,i,a,n,r,l){var h=this.tc.outlineOffset,o=2*h;this.x=a*t+r-h,this.y=a*e+l-h,this.w=a*s+o,this.h=a*i+o,this.sc=a,this.z=n},L.Ants=function(t){if(!!this.adash){var e=this.adash,s=this.agap,i=this.aspeed,a=e+s,n=0,r=e,l=s,h=0,o=0,u;i&&(o=ut(i)*(ct()-this.ts)/50,i<0&&(o=864e4-o),i=~~o%a),i?(e>=i?(n=e-i,r=i):(l=a-i,h=s-l),u=[n,l,r,h]):u=[e,s],t.setLineDash(u)}},L.DrawOutline=function(t,e,s,i,a,n){var r=K(this.radius,a/2,i/2);t.strokeStyle=n,this.Ants(t),Tt(t,e,s,i,a,r,!0)},L.DrawSize=function(t,e,s,i,a,n,r,l,h){var o=r.w,u=r.h,f,m,g;return this.pulsate?(r.image?g=(r.image.height+this.tc.outlineIncrease)/r.image.height:g=r.oscale,m=r.fimage||r.image,f=1+(g-1)*(1-this.pulse),r.h*=f,r.w*=f):m=r.oimage,r.alpha=1,r.Draw(t,l,h,m),r.h=u,r.w=o,1},L.DrawColour=function(t,e,s,i,a,n,r,l,h){return r.oimage?(this.pulse<1?(r.alpha=1-yt(this.pulse,2),r.Draw(t,l,h,r.fimage),r.alpha=this.pulse):r.alpha=1,r.Draw(t,l,h,r.oimage),1):this[r.image?"DrawColourImage":"DrawColourText"](t,e,s,i,a,n,r,l,h)},L.DrawColourText=function(t,e,s,i,a,n,r,l,h){var o=r.colour;return r.colour=n,r.alpha=1,r.Draw(t,l,h),r.colour=o,1},L.DrawColourImage=function(t,e,s,i,a,n,r,l,h){var o=t.canvas,u=~~k(e,0),f=~~k(s,0),m=K(o.width-u,i)+.5|0,g=K(o.height-f,a)+.5|0,x;return Ct?(Ct.width=m,Ct.height=g):Ct=tt(m,g),Ct?(x=Ct.getContext("2d"),x.drawImage(o,u,f,m,g,0,0,m,g),t.clearRect(u,f,m,g),this.pulsate?r.alpha=1-yt(this.pulse,2):r.alpha=1,r.Draw(t,l,h),t.setTransform(1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(u,f,m,g),t.clip(),t.globalCompositeOperation="source-in",t.fillStyle=n,t.fillRect(u,f,m,g),t.restore(),t.globalAlpha=1,t.globalCompositeOperation="destination-over",t.drawImage(Ct,0,0,m,g,u,f,m,g),t.globalCompositeOperation="source-over",1):this.SetMethod("outline")},L.DrawBlock=function(t,e,s,i,a,n){var r=K(this.radius,a/2,i/2);t.fillStyle=n,Tt(t,e,s,i,a,r)},L.DrawSimple=function(t,e,s,i,a,n){var r=this.tc;return t.setTransform(1,0,0,1,0,0),t.strokeStyle=this.colour,t.lineWidth=r.outlineThickness,t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0,t.globalAlpha=n?a:1,this.drawFunc(t,this.x,this.y,this.w,this.h,this.colour,e,s,i)},L.DrawPulsate=function(t,e,s,i){var a=ct()-this.ts,n=this.tc,r=n.pulsateTo+(1-n.pulsateTo)*(.5+q(2*Math.PI*a/(1e3*n.pulsateTime))/2);return this.pulse=r=v.Smooth(1,r),this.DrawSimple(t,e,s,i,r,1)},L.Active=function(t,e,s){var i=e>=this.x&&s>=this.y&&e<=this.x+this.w&&s<=this.y+this.h;return i?this.ts=this.ts||ct():this.ts=null,i},L.PreDraw=L.PostDraw=L.LastDraw=_t;function Ht(t,e,s,i,a,n,r,l,h,o,u,f,m,g){this.tc=t,this.image=null,this.text=e,this.text_original=g,this.line_widths=[],this.title=s.title||null,this.a=s,this.position=new pt(i[0],i[1],i[2]),this.x=this.y=this.z=0,this.w=a,this.h=n,this.colour=r||t.textColour,this.bgColour=l||t.bgColour,this.bgRadius=h|0,this.bgOutline=o||this.colour,this.bgOutlineThickness=u|0,this.textFont=f||t.textFont,this.padding=m|0,this.sc=this.alpha=1,this.weighted=!t.weight,this.outline=new _e(t,this)}E=Ht.prototype,E.Init=function(t){var e=this.tc;this.textHeight=e.textHeight,this.HasText()?this.Measure(e.ctxt,e):(this.w=this.iw,this.h=this.ih),this.SetShadowColour=e.shadowAlpha?this.SetShadowColourAlpha:this.SetShadowColourFixed,this.SetDraw(e)},E.Draw=_t,E.HasText=function(){return this.text&&this.text[0].length>0},E.EqualTo=function(t){var e=t.getElementsByTagName("img");return this.a.href!=t.href?0:e.length?this.image.src==e[0].src:(t.innerText||t.textContent)==this.text_original},E.SetImage=function(t){this.image=this.fimage=t},E.SetDraw=function(t){this.Draw=this.fimage?t.ie>7?this.DrawImageIE:this.DrawImage:this.DrawText,t.noSelect&&(this.CheckActive=_t)},E.MeasureText=function(t){var e,s=this.text.length,i=0,a;for(e=0;e<s;++e)this.line_widths[e]=a=t.measureText(this.text[e]).width,i=k(i,a);return i},E.Measure=function(t,e){var s=me(this.text,this.textFont,this.textHeight),i,a,n,r,l,h,o,u,f;o=s?s.max.y+s.min.y:this.textHeight,t.font=this.font=this.textHeight+"px "+this.textFont,h=this.MeasureText(t),e.txtOpt&&(i=e.txtScale,a=i*this.textHeight,n=a+"px "+this.textFont,r=[i*e.shadowOffset[0],i*e.shadowOffset[1]],t.font=n,l=this.MeasureText(t),f=new Qt(this.text,n,l+i,i*o+i,l,this.line_widths,e.textAlign,e.textVAlign,i),this.image&&f.SetImage(this.image,this.iw,this.ih,e.imagePosition,e.imagePadding,e.imageAlign,e.imageVAlign,e.imageScale),u=f.Create(this.colour,this.bgColour,this.bgOutline,i*this.bgOutlineThickness,e.shadow,i*e.shadowBlur,r,i*this.padding,i*this.bgRadius),e.outlineMethod=="colour"?this.oimage=f.Create(this.outline.colour,this.bgColour,this.outline.colour,i*this.bgOutlineThickness,e.shadow,i*e.shadowBlur,r,i*this.padding,i*this.bgRadius):e.outlineMethod=="size"&&(s=me(this.text,this.textFont,this.textHeight+e.outlineIncrease),a=s.max.y+s.min.y,n=i*(this.textHeight+e.outlineIncrease)+"px "+this.textFont,t.font=n,l=this.MeasureText(t),f=new Qt(this.text,n,l+i,i*a+i,l,this.line_widths,e.textAlign,e.textVAlign,i),this.image&&f.SetImage(this.image,this.iw+e.outlineIncrease,this.ih+e.outlineIncrease,e.imagePosition,e.imagePadding,e.imageAlign,e.imageVAlign,e.imageScale),this.oimage=f.Create(this.colour,this.bgColour,this.bgOutline,i*this.bgOutlineThickness,e.shadow,i*e.shadowBlur,r,i*this.padding,i*this.bgRadius),this.oscale=this.oimage.width/u.width,e.outlineIncrease>0?u=Ut(u,this.oimage.width,this.oimage.height):this.oimage=Ut(this.oimage,u.width,u.height)),u&&(this.fimage=u,h=this.fimage.width/i,o=this.fimage.height/i),this.SetDraw(e),e.txtOpt=!!this.fimage),this.h=o,this.w=h},E.SetFont=function(t,e,s,i){this.textFont=t,this.colour=e,this.bgColour=s,this.bgOutline=i,this.Measure(this.tc.ctxt,this.tc)},E.SetWeight=function(t){var e=this.tc,s=e.weightMode.split(/[, ]/),i,a,n=t.length;if(!!this.HasText()){for(this.weighted=!0,a=0;a<n;++a)i=s[a]||"size",i=="both"?(this.Weight(t[a],e.ctxt,e,"size",e.min_weight[a],e.max_weight[a],a),this.Weight(t[a],e.ctxt,e,"colour",e.min_weight[a],e.max_weight[a],a)):this.Weight(t[a],e.ctxt,e,i,e.min_weight[a],e.max_weight[a],a);this.Measure(e.ctxt,e)}},E.Weight=function(t,e,s,i,a,n,r){t=isNaN(t)?1:t;var l=(t-a)/(n-a);i=="colour"?this.colour=Wt(s,l,r):i=="bgcolour"?this.bgColour=Wt(s,l,r):i=="bgoutline"?this.bgOutline=Wt(s,l,r):i=="outline"?this.outline.colour=Wt(s,l,r):i=="size"&&(s.weightSizeMin>0&&s.weightSizeMax>s.weightSizeMin?this.textHeight=s.weightSize*(s.weightSizeMin+(s.weightSizeMax-s.weightSizeMin)*l):this.textHeight=k(1,t*s.weightSize))},E.SetShadowColourFixed=function(t,e,s){t.shadowColor=e},E.SetShadowColourAlpha=function(t,e,s){t.shadowColor=pi(e,s)},E.DrawText=function(t,e,s){var i=this.tc,a=this.x,n=this.y,r=this.sc,l,h;for(t.globalAlpha=this.alpha,t.fillStyle=this.colour,i.shadow&&this.SetShadowColour(t,i.shadow,this.alpha),t.font=this.font,a+=e/r,n+=s/r-this.h/2,l=0;l<this.text.length;++l)h=a,i.textAlign=="right"?h+=this.w/2-this.line_widths[l]:i.textAlign=="centre"?h-=this.line_widths[l]/2:h-=this.w/2,t.setTransform(r,0,0,r,r*h,r*n),t.fillText(this.text[l],0,0),n+=this.textHeight},E.DrawImage=function(t,e,s,i){var a=this.x,n=this.y,r=this.sc,l=i||this.fimage,h=this.w,o=this.h,u=this.alpha,f=this.shadow;t.globalAlpha=u,f&&this.SetShadowColour(t,f,u),a+=e/r-h/2,n+=s/r-o/2,t.setTransform(r,0,0,r,r*a,r*n),t.drawImage(l,0,0,h,o)},E.DrawImageIE=function(t,e,s){var i=this.fimage,a=this.sc,n=i.width=this.w*a,r=i.height=this.h*a,l=this.x*a+e-n/2,h=this.y*a+s-r/2;t.setTransform(1,0,0,1,0,0),t.globalAlpha=this.alpha,t.drawImage(i,l,h)},E.Calc=function(t,e){var s,i=this.tc,a=i.minBrightness,n=i.maxBrightness,r=i.max_radius;return s=t.xform(this.position),this.xformed=s,s=ji(i,s,i.stretchX,i.stretchY),this.x=s.x,this.y=s.y,this.z=s.z,this.sc=s.w,this.alpha=e*Lt(a+(n-a)*(r-this.z)/(2*r),0,1),this.xformed},E.UpdateActive=function(t,e,s){var i=this.outline,a=this.w,n=this.h,r=this.x-a/2,l=this.y-n/2;return i.Update(r,l,a,n,this.sc,this.z,e,s),i},E.CheckActive=function(t,e,s){var i=this.tc,a=this.UpdateActive(t,e,s);return a.Active(t,i.mx,i.my)?a:null},E.Clicked=function(t){var e=this.a,s=e.target,i=e.href,a;if(s!=""&&s!="_self"){if(self.frames[s])self.frames[s].document.location=i;else{try{if(top.frames[s]){top.frames[s].document.location=i;return}}catch(n){}window.open(i,s)}return}if(j.createEvent){if(a=j.createEvent("MouseEvents"),a.initMouseEvent("click",1,1,window,0,0,0,0,0,0,0,0,0,0,null),!e.dispatchEvent(a))return}else if(e.fireEvent&&!e.fireEvent("onclick"))return;j.location=i};function v(t,e,s){var i,a,n=j.getElementById(t),r=["id","class","innerHTML"],l;if(!n)throw 0;if(at(window.G_vmlCanvasManager)&&(n=window.G_vmlCanvasManager.initElement(n),this.ie=parseFloat(navigator.appVersion.split("MSIE")[1])),n&&(!n.getContext||!n.getContext("2d").fillText)){for(a=j.createElement("div"),i=0;i<r.length;++i)a[r[i]]=n[r[i]];throw n.parentNode.insertBefore(a,n),n.parentNode.removeChild(n),0}for(i in v.options)this[i]=s&&at(s[i])?s[i]:at(v[i])?v[i]:v.options[i];if(this.canvas=n,this.ctxt=n.getContext("2d"),this.z1=250/k(this.depth,.001),this.z2=this.z1/this.zoom,this.radius=K(n.height,n.width)*.0075,this.max_radius=100,this.max_weight=[],this.min_weight=[],this.textFont=this.textFont&&qt(this.textFont),this.textHeight*=1,this.imageRadius=this.imageRadius.toString(),this.pulsateTo=Lt(this.pulsateTo,0,1),this.minBrightness=Lt(this.minBrightness,0,1),this.maxBrightness=Lt(this.maxBrightness,this.minBrightness,1),this.ctxt.textBaseline="top",this.lx=(this.lock+"").indexOf("x")+1,this.ly=(this.lock+"").indexOf("y")+1,this.frozen=this.dx=this.dy=this.fixedAnim=this.touchState=0,this.fixedAlpha=1,this.source=e||t,this.repeatTags=K(64,~~this.repeatTags),this.minTags=K(200,~~this.minTags),~~this.scrollPause>0?v.scrollPause=~~this.scrollPause:this.scrollPause=0,this.minTags>0&&this.repeatTags<1&&(i=this.GetTags().length)&&(this.repeatTags=he(this.minTags/i)-1),this.transform=nt.Identity(),this.startTime=this.time=ct(),this.mx=this.my=-1,this.centreImage&&vi(this),this.Animate=this.dragControl?this.AnimateDrag:this.AnimatePosition,this.animTiming=typeof v[this.animTiming]=="function"?v[this.animTiming]:v.Smooth,this.shadowBlur||this.shadowOffset[0]||this.shadowOffset[1]?(this.ctxt.shadowColor=this.shadow,this.shadow=this.ctxt.shadowColor,this.shadowAlpha=xi()):delete this.shadow,this.Load(),e&&this.hideTags&&function(h){v.loaded?h.HideTags():Bt("load",function(){h.HideTags()},window)}(this),this.yaw=this.initial?this.initial[0]*this.maxSpeed:0,this.pitch=this.initial?this.initial[1]*this.maxSpeed:0,this.tooltip?(this.ctitle=n.title,n.title="",this.tooltip=="native"?this.Tooltip=this.TooltipNative:(this.Tooltip=this.TooltipDiv,this.ttdiv||(this.ttdiv=j.createElement("div"),this.ttdiv.className=this.tooltipClass,this.ttdiv.style.position="absolute",this.ttdiv.style.zIndex=n.style.zIndex+1,Bt("mouseover",function(h){h.target.style.display="none"},this.ttdiv),j.body.appendChild(this.ttdiv)))):this.Tooltip=this.TooltipNone,!this.noMouse&&!X[t])for(X[t]=[["mousemove",ve],["mouseout",Mi],["mouseup",Di],["touchstart",bi],["touchend",pe],["touchcancel",pe],["touchmove",Ai]],this.dragControl&&(X[t].push(["mousedown",Si]),X[t].push(["selectstart",_t])),this.wheelZoom&&(X[t].push(["mousewheel",xe]),X[t].push(["DOMMouseScroll",xe])),this.scrollPause&&X[t].push(["scroll",Ii,window]),i=0;i<X[t].length;++i)a=X[t][i],Bt(a[0],a[1],a[2]?a[2]:n);v.started||(l=window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,v.NextFrame=l?v.NextFrameRAF:v.NextFrameTimeout,v.interval=this.interval,v.NextFrame(this.interval),v.started=1)}y=v.prototype,y.SourceElements=function(){return j.querySelectorAll?j.querySelectorAll("#"+this.source):[j.getElementById(this.source)]},y.HideTags=function(){var t=this.SourceElements(),e;for(e=0;e<t.length;++e)t[e].style.display="none"},y.GetTags=function(){var t=this.SourceElements(),e,s=[],i,a,n;for(n=0;n<=this.repeatTags;++n)for(i=0;i<t.length;++i)for(e=t[i].getElementsByTagName("a"),a=0;a<e.length;++a)s.push(e[a]);return s},y.Message=function(t){var e=[],s,i,a=t.split(""),n,r,l,h;for(s=0;s<a.length;++s)a[s]!=" "&&(i=s-a.length/2,n=j.createElement("a"),n.href="#",n.innerText=a[s],l=100*dt(i/9),h=-100*q(i/9),r=new Ht(this,a[s],n,[l,0,h],2,18,"#000","#fff",0,0,0,"monospace",2,a[s]),r.Init(),e.push(r));return e},y.CreateTag=function(t){var e,s,i,a,n,r,l,h,o=[0,0,0];if(this.imageMode!="text"&&(e=t.getElementsByTagName("img"),e.length&&(s=new Image,s.src=e[0].src,!this.imageMode)))return i=new Ht(this,"",t,o,0,0),i.SetImage(s),kt(s,e[0],i,this),i;if(this.imageMode!="image"&&(n=new Ce(t),a=n.Lines(),n.Empty()?n=null:(r=this.textFont||qt(W(t,"font-family")),this.splitWidth&&(a=n.SplitWidth(this.splitWidth,this.ctxt,r,this.textHeight)),l=this.bgColour=="tag"?W(t,"background-color"):this.bgColour,h=this.bgOutline=="tag"?W(t,"color"):this.bgOutline)),n||s)return i=new Ht(this,a,t,o,2,this.textHeight+2,this.textColour||W(t,"color"),l,this.bgRadius,h,this.bgOutlineThickness,r,this.padding,n&&n.original),s?(i.SetImage(s),kt(s,e[0],i,this)):i.Init(),i},y.UpdateTag=function(t,e){var s=this.textColour||W(e,"color"),i=this.textFont||qt(W(e,"font-family")),a=this.bgColour=="tag"?W(e,"background-color"):this.bgColour,n=this.bgOutline=="tag"?W(e,"color"):this.bgOutline;t.a=e,t.title=e.title,(t.colour!=s||t.textFont!=i||t.bgColour!=a||t.bgOutline!=n)&&t.SetFont(i,s,a,n)},y.Weight=function(t){var e=t.length,s,i,a,n=[],r,l=this.weightFrom?this.weightFrom.split(/[, ]/):[null],h=l.length;for(i=0;i<e;++i)for(n[i]=[],a=0;a<h;++a)s=Ti(t[i].a,l[a],this.textHeight),(!this.max_weight[a]||s>this.max_weight[a])&&(this.max_weight[a]=s),(!this.min_weight[a]||s<this.min_weight[a])&&(this.min_weight[a]=s),n[i][a]=s;for(a=0;a<h;++a)this.max_weight[a]>this.min_weight[a]&&(r=1);if(r)for(i=0;i<e;++i)t[i].SetWeight(n[i])},y.Load=function(){var t=this.GetTags(),e=[],s,i,a,n,r,l,h,o,u=[],f={sphere:di,vcylinder:ci,hcylinder:fi,vring:gi,hring:mi};if(t.length){for(u.length=t.length,o=0;o<t.length;++o)u[o]=o;for(this.shuffleTags&&ue(u),n=100*this.radiusX,r=100*this.radiusY,l=100*this.radiusZ,this.max_radius=k(n,k(r,l)),o=0;o<t.length;++o)i=this.CreateTag(t[u[o]]),i&&e.push(i);for(this.weight&&this.Weight(e,!0),this.shapeArgs?this.shapeArgs[0]=e.length:(a=this.shape.toString().split(/[(),]/),s=a.shift(),typeof window[s]=="function"?this.shape=window[s]:this.shape=f[s]||f.sphere,this.shapeArgs=[e.length,n,r,l].concat(a)),h=this.shape.apply(this,this.shapeArgs),this.listLength=e.length,o=0;o<e.length;++o)e[o].position=new pt(h[o][0],h[o][1],h[o][2])}this.noTagsMessage&&!e.length&&(o=this.imageMode&&this.imageMode!="both"?this.imageMode+" ":"",e=this.Message("No "+o+"tags")),this.taglist=e},y.Update=function(){var t=this.GetTags(),e=[],s=this.taglist,i,a=[],n=[],r,l,h,o,u;if(!this.shapeArgs)return this.Load();if(t.length){for(h=this.listLength=t.length,l=s.length,o=0;o<l;++o)e.push(s[o]),n.push(o);for(o=0;o<h;++o){for(u=0,i=0;u<l;++u)s[u].EqualTo(t[o])&&(this.UpdateTag(e[u],t[o]),i=n[u]=-1);i||a.push(o)}for(o=0,u=0;o<l;++o)n[u]==-1?n.splice(u,1):++u;if(n.length){for(ue(n);n.length&&a.length;)o=n.shift(),u=a.shift(),e[o]=this.CreateTag(t[u]);for(n.sort(function(f,m){return f-m});n.length;)e.splice(n.pop(),1)}for(u=e.length/(a.length+1),o=0;a.length;)e.splice(he(++o*u),0,this.CreateTag(t[a.shift()]));for(this.shapeArgs[0]=h=e.length,r=this.shape.apply(this,this.shapeArgs),o=0;o<h;++o)e[o].position=new pt(r[o][0],r[o][1],r[o][2]);this.weight&&this.Weight(e)}this.taglist=e},y.SetShadow=function(t){t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffset[0],t.shadowOffsetY=this.shadowOffset[1]},y.Draw=function(t){if(!this.paused){var e=this.canvas,s=e.width,i=e.height,a=0,n=(t-this.time)*v.interval/1e3,r=s/2+this.offsetX,l=i/2+this.offsetY,h=this.ctxt,o,u,f,m=-1,g=this.taglist,x=g.length,z=this.frontSelect,T=this.centreFunc==_t,H;if(this.time=t,this.frozen&&this.drawn)return this.Animate(s,i,n);for(H=this.AnimateFixed(),h.setTransform(1,0,0,1,0,0),f=0;f<x;++f)g[f].Calc(this.transform,this.fixedAlpha);if(g=hi(g,function(V,A){return A.z-V.z}),H&&this.fixedAnim.active)o=this.fixedAnim.tag.UpdateActive(h,r,l);else{for(this.active=null,f=0;f<x;++f)u=this.mx>=0&&this.my>=0&&this.taglist[f].CheckActive(h,r,l),u&&u.sc>a&&(!z||u.z<=0)&&(o=u,m=f,o.tag=this.taglist[f],a=u.sc);this.active=o}for(this.txtOpt||this.shadow&&this.SetShadow(h),h.clearRect(0,0,s,i),f=0;f<x;++f){if(!T&&g[f].z<=0){try{this.centreFunc(h,s,i,r,l)}catch(V){alert(V),this.centreFunc=_t}T=!0}o&&o.tag==g[f]&&o.PreDraw(h,g[f],r,l)||g[f].Draw(h,r,l),o&&o.tag==g[f]&&o.PostDraw(h)}this.freezeActive&&o?this.Freeze():(this.UnFreeze(),this.drawn=x==this.listLength),this.fixedCallback&&(this.fixedCallback(this,this.fixedCallbackTag),this.fixedCallback=null),H||this.Animate(s,i,n),o&&o.LastDraw(h),e.style.cursor=o?this.activeCursor:"",this.Tooltip(o,this.taglist[m])}},y.TooltipNone=function(){},y.TooltipNative=function(t,e){t?this.canvas.title=e&&e.title?e.title:"":this.canvas.title=this.ctitle},y.SetTTDiv=function(t,e){var s=this,i=s.ttdiv.style;t!=s.ttdiv.innerHTML&&(i.display="none"),s.ttdiv.innerHTML=t,e&&(e.title=s.ttdiv.innerHTML),i.display=="none"&&!s.tttimer&&(s.tttimer=setTimeout(function(){var a=ye(s.canvas.id);i.display="block",i.left=a.x+s.mx+"px",i.top=a.y+s.my+24+"px",s.tttimer=null},s.tooltipDelay))},y.TooltipDiv=function(t,e){t&&e&&e.title?this.SetTTDiv(e.title,e):!t&&this.mx!=-1&&this.my!=-1&&this.ctitle.length?this.SetTTDiv(this.ctitle):this.ttdiv.style.display="none"},y.Transform=function(t,e,s){if(e||s){var i=dt(e),a=q(e),n=dt(s),r=q(s),l=new nt([r,0,n,0,1,0,-n,0,r]),h=new nt([1,0,0,0,a,-i,0,i,a]);t.transform=t.transform.mul(l.mul(h))}},y.AnimateFixed=function(){var t,e,s,i,a;return this.fadeIn&&(e=ct()-this.startTime,e>=this.fadeIn?(this.fadeIn=0,this.fixedAlpha=1):this.fixedAlpha=e/this.fadeIn),this.fixedAnim?(this.fixedAnim.transform||(this.fixedAnim.transform=this.transform),t=this.fixedAnim,e=ct()-t.t0,s=t.angle,a=this.animTiming(t.t,e),this.transform=t.transform,e>=t.t?(this.fixedCallbackTag=t.tag,this.fixedCallback=t.cb,this.fixedAnim=this.yaw=this.pitch=0):s*=a,i=nt.Rotation(s,t.axis),this.transform=this.transform.mul(i),this.fixedAnim!=0):!1},y.AnimatePosition=function(t,e,s){var i=this,a=i.mx,n=i.my,r,l;!i.frozen&&a>=0&&n>=0&&a<t&&n<e?(r=i.maxSpeed,l=i.reverse?-1:1,i.lx||(i.yaw=(a*2*r/t-r)*l*s),i.ly||(i.pitch=(n*2*r/e-r)*-l*s),i.initial=null):i.initial||(i.frozen&&!i.freezeDecel?i.yaw=i.pitch=0:i.Decel(i)),this.Transform(i,i.pitch,i.yaw)},y.AnimateDrag=function(t,e,s){var i=this,a=100*s*i.maxSpeed/i.max_radius/i.zoom;i.dx||i.dy?(i.lx||(i.yaw=i.dx*a/i.stretchX),i.ly||(i.pitch=i.dy*-a/i.stretchY),i.dx=i.dy=0,i.initial=null):i.initial||i.Decel(i),this.Transform(i,i.pitch,i.yaw)},y.Freeze=function(){this.frozen||(this.preFreeze=[this.yaw,this.pitch],this.frozen=1,this.drawn=0)},y.UnFreeze=function(){this.frozen&&(this.yaw=this.preFreeze[0],this.pitch=this.preFreeze[1],this.frozen=0)},y.Decel=function(t){var e=t.minSpeed,s=ut(t.yaw),i=ut(t.pitch);!t.lx&&s>e&&(t.yaw=s>t.z0?t.yaw*t.decel:0),!t.ly&&i>e&&(t.pitch=i>t.z0?t.pitch*t.decel:0)},y.Zoom=function(t){this.z2=this.z1*(1/t),this.drawn=0},y.Clicked=function(t){var e=this.active;try{e&&e.tag&&(this.clickToFront===!1||this.clickToFront===null?e.tag.Clicked(t):this.TagToFront(e.tag,this.clickToFront,function(){e.tag.Clicked(t)},!0))}catch(s){}},y.Wheel=function(t){var e=this.zoom+this.zoomStep*(t?1:-1);this.zoom=K(this.zoomMax,k(this.zoomMin,e)),this.Zoom(this.zoom)},y.BeginDrag=function(t){this.down=Kt(t,this.canvas),t.cancelBubble=!0,t.returnValue=!1,t.preventDefault&&t.preventDefault()},y.Drag=function(t,e){if(this.dragControl&&this.down){var s=this.dragThreshold*this.dragThreshold,i=e.x-this.down.x,a=e.y-this.down.y;(this.dragging||i*i+a*a>s)&&(this.dx=i,this.dy=a,this.dragging=1,this.down=e)}return this.dragging},y.EndDrag=function(){var t=this.dragging;return this.dragging=this.down=null,t};function Te(t){var e=t.targetTouches[0],s=t.targetTouches[1];return Ot(yt(s.pageX-e.pageX,2)+yt(s.pageY-e.pageY,2))}y.BeginPinch=function(t){this.pinched=[Te(t),this.zoom],t.preventDefault&&t.preventDefault()},y.Pinch=function(t){var e,s,i=this.pinched;!i||(s=Te(t),e=i[1]*s/i[0],this.zoom=K(this.zoomMax,k(this.zoomMin,e)),this.Zoom(this.zoom))},y.EndPinch=function(t){this.pinched=null},y.Pause=function(){this.paused=!0},y.Resume=function(){this.paused=!1},y.SetSpeed=function(t){this.initial=t,this.yaw=t[0]*this.maxSpeed,this.pitch=t[1]*this.maxSpeed},y.FindTag=function(t){if(!at(t))return null;if(at(t.index)&&(t=t.index),!Nt(t))return this.taglist[t];var e,s,i;for(at(t.id)?(e="id",s=t.id):at(t.text)&&(e="innerText",s=t.text),i=0;i<this.taglist.length;++i)if(this.taglist[i].a[e]==s)return this.taglist[i]},y.RotateTag=function(t,e,s,i,a,n){var r=t.Calc(this.transform,1),l=new pt(r.x,r.y,r.z),h=ui(s,e),o=l.angle(h),u=l.cross(h).unit();o==0?(this.fixedCallbackTag=t,this.fixedCallback=a):this.fixedAnim={angle:-o,axis:u,t:i,t0:ct(),cb:a,tag:t,active:n}},y.TagToFront=function(t,e,s,i){this.RotateTag(t,0,0,e,s,i)},v.Start=function(t,e,s){v.Delete(t),v.tc[t]=new v(t,e,s)};function Vt(t,e){v.tc[e]&&v.tc[e][t]()}v.Linear=function(t,e){return e/t},v.Smooth=function(t,e){return .5-q(e*Math.PI/t)/2},v.Pause=function(t){Vt("Pause",t)},v.Resume=function(t){Vt("Resume",t)},v.Reload=function(t){Vt("Load",t)},v.Update=function(t){Vt("Update",t)},v.SetSpeed=function(t,e){return Nt(e)&&v.tc[t]&&!isNaN(e[0])&&!isNaN(e[1])?(v.tc[t].SetSpeed(e),!0):!1},v.TagToFront=function(t,e){return Nt(e)?(e.lat=e.lng=0,v.RotateTag(t,e)):!1},v.RotateTag=function(t,e){if(Nt(e)&&v.tc[t]){isNaN(e.time)&&(e.time=500);var s=v.tc[t].FindTag(e);if(s)return v.tc[t].RotateTag(s,e.lat,e.lng,e.time,e.callback,e.active),!0}return!1},v.Delete=function(t){var e,s;if(X[t]&&(s=j.getElementById(t),s))for(e=0;e<X[t].length;++e)_i(X[t][e][0],X[t][e][1],s);delete X[t],delete v.tc[t]},v.NextFrameRAF=function(){requestAnimationFrame(we)},v.NextFrameTimeout=function(t){setTimeout(Ei,t)},v.tc={},v.options={z1:2e4,z2:2e4,z0:2e-4,freezeActive:!1,freezeDecel:!1,activeCursor:"pointer",pulsateTo:1,pulsateTime:3,reverse:!1,depth:.5,maxSpeed:.1,minSpeed:0,decel:.95,interval:20,minBrightness:.1,maxBrightness:1,outlineColour:"tag",outlineThickness:null,outlineOffset:null,outlineMethod:null,outlineRadius:20,textColour:null,textHeight:15,textFont:"Helvetica, Arial, sans-serif",shadow:"#000",shadowBlur:0,shadowOffset:[0,0],initial:null,hideTags:!1,zoom:1,weight:!1,weightMode:"size",weightFrom:null,weightSize:1,weightSizeMin:null,weightSizeMax:null,weightGradient:{0:"#f00",.33:"#ff0",.66:"#0f0",1:"#00f"},txtOpt:!0,txtScale:2,frontSelect:!1,wheelZoom:!0,zoomMin:.3,zoomMax:3,zoomStep:.05,shape:"sphere",lock:null,tooltip:null,tooltipDelay:300,tooltipClass:"tctooltip",radiusX:1,radiusY:1,radiusZ:1,stretchX:1,stretchY:1,offsetX:0,offsetY:0,shuffleTags:!1,noSelect:!1,noMouse:!1,imageScale:1,paused:!1,dragControl:!0,dragThreshold:4,centreFunc:_t,splitWidth:0,animTiming:"Smooth",clickToFront:!1,fadeIn:1,padding:10,bgColour:"tag",bgRadius:16,bgOutline:"tag",bgOutlineThickness:0,outlineIncrease:1,textAlign:"center",textVAlign:"middle",imageMode:null,imagePosition:null,imagePadding:"tag",imageAlign:"center",imageVAlign:"middle",noTagsMessage:!0,centreImage:null,pinchZoom:!1,repeatTags:0,minTags:0,imageRadius:0,scrollPause:!1,outlineDash:-1,outlineDashSpace:0,outlineDashSpeed:1};for(ht in v.options)v[ht]=v.options[ht];var Pi=Yt.Z.Title,Oi=function(){var e=(0,w.tT)("tags"),s=e.tagsArr,i=e.guideTagsArr,a=(0,w.YB)();return(0,C.useEffect)(function(){if(s&&i)try{v.Start("tagcloud","")}catch(n){console.log(n)}},[s,i]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(R.Z,{className:b().sideCard,bodyStyle:{width:"100%"},style:{marginBottom:20},children:[(0,d.jsx)(Pi,{level:4,children:a.formatMessage({id:"wallet.tags.title"})}),(0,d.jsx)("canvas",{height:"300",id:"tagcloud",children:(0,d.jsxs)("ul",{className:oi().tagCloud,children:[i.map(function(n){return(0,d.jsx)("li",{children:(0,d.jsxs)("a",{style:{color:n.textColor,backgroundColor:n.bgColor,borderColor:"#000",fontSize:"2rem",borderStyle:"dashed",borderWidth:20},className:"tagItem",onClick:function(){w.m8.push("".concat(wt.Z.page.socialPage,"/?type=").concat(n.count.type,"&from=").concat(n.count.chain))},children:["\u2757",n.count.name]})})}),s.map(function(n){return(0,d.jsx)("li",{children:(0,d.jsxs)("a",{style:{color:n.textColor,backgroundColor:n.bgColor,borderColor:n.borderColor,fontSize:"".concat(1+n.value/100,"rem")},children:[(0,d.jsx)("small",{children:n.value}),n.count]})})})]})})]})})},zi=Oi,Ni=function(){var e=(0,C.useState)("balance"),s=(0,_.Z)(e,2),i=s[0],a=s[1],n=(0,C.useState)(!1),r=(0,_.Z)(n,2),l=r[0],h=r[1],o=(0,w.YB)();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:D().mainTopContainer,children:(0,d.jsxs)("div",{className:b().indexContainer,children:[(0,d.jsx)("div",{className:b().left,children:(0,d.jsxs)(R.Z,{className:D().card,bodyStyle:{padding:0,width:"100%"},children:[(0,d.jsxs)("div",{className:D().tabSelector,children:[(0,d.jsx)("div",{className:P()(D().tabItem,i==="balance"?"":D().inactive),onClick:function(){return a("balance")},children:o.formatMessage({id:"wallet.dashboard.balance"})}),(0,d.jsx)("div",{className:P()(D().tabItem,i==="assets"?"":D().inactive),onClick:function(){return a("assets")},children:o.formatMessage({id:"wallet.dashboard.assets"})})]}),i==="balance"&&(0,d.jsx)(We,{}),i==="assets"&&(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(Ve,{})})]})}),(0,d.jsxs)("div",{className:b().right,children:[(0,d.jsx)(zi,{}),(0,d.jsx)(R.Z,{className:b().sideCard,bodyStyle:{width:"100%"},children:(0,d.jsx)(ei,{})})]})]})}),(0,d.jsx)(ie.Z,{visable:l,title:o.formatMessage({id:"wallet.guide.welcome"}),content:(0,d.jsx)(ri,{}),close:function(){h(!1)},footer:(0,d.jsx)(S.Z,{block:!0,shape:"round",size:"large",className:b().button,onClick:function(){h(!1)},children:o.formatMessage({id:"common.close"})})})]})},Bi=Ni},99141:function(M,Y,c){"use strict";c.d(Y,{U:function(){return w},g:function(){return D}});var mt=c(8870),S=c(3182),Q=c(94043),R=c.n(Q),_=c(51625),C=c(55347),p=c(1096),P=new C.ZP({type:"sr25519"});function w(U,b){return F.apply(this,arguments)}function F(){return F=(0,S.Z)(R().mark(function U(b,G){var B,J;return R().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return B=new FormData,B.append("file",b),I.next=4,fetch(_.Z.ipfs.upload,(0,mt.Z)({method:"POST",body:B},G||{}));case 4:return J=I.sent,I.next=7,J.json();case 7:return I.abrupt("return",I.sent);case 8:case"end":return I.stop()}},U)})),F.apply(this,arguments)}var D=function(){var U=(0,S.Z)(R().mark(function b(G,B,J){var Z,I,et,ot;return R().wrap(function(xt){for(;;)switch(xt.prev=xt.next){case 0:if(Z=(0,p.Gh)(B,J),!(Z==null||!Z)){xt.next=3;break}throw new Error("Wrong password");case 3:return I=P.createFromUri(Z),et=window.apiWs.tx.did.setAvatar(G),ot=window.apiWs.tx.magic.codo(et),xt.next=8,ot.signAndSend(I,p.XQ);case 8:case"end":return xt.stop()}},b)}));return function(G,B,J){return U.apply(this,arguments)}}()},47193:function(M,Y,c){"use strict";var mt=c(55121),S=640,Q=640,R=function(p,P,w,F,D,U){if(p!==null){p.save();var b=2*D,G=w+D,B=F+D,J=p.createLinearGradient(0,640,640,0);J.addColorStop(0,"#FE2105"),J.addColorStop(1,"#96E9EA"),p.fillStyle=J,p.beginPath(),p.rect(0,0,640,640),p.fill(),p.save(),p.restore(),p.beginPath(),p.arc(G,B,D-40,0,2*Math.PI),p.clip(),p.drawImage(P,w+40,F+40,b-80,b-80),p.restore();var Z=Math.PI/9;p.lineWidth=8;for(var I=0;I<180;I+=1)p.save(),p.beginPath(),U[I]==="0"?p.strokeStyle="transparent":p.strokeStyle="#fff",p.arc(G,B,D+4,Z,Z+10*Math.PI/9/180,!1),Z+=10*Math.PI/9/180,(I+1)%45==0&&(Z+=2*Math.PI/9),p.stroke();var et=Math.PI/6;p.lineWidth=6;for(var ot=0;ot<180;ot+=1)p.save(),p.beginPath(),U[ot]==="0"?p.strokeStyle="transparent":p.strokeStyle="#fff",p.arc(G,B,D+22,et,et+2*Math.PI/3/180,!1),et+=2*Math.PI/3/180,(ot+1)%45==0&&(et+=2*Math.PI/6),p.stroke()}},_=function(p,P,w,F,D,U){var b=document.createElement("canvas");b.width=S,b.height=Q;var G=b.getContext("2d"),B=new Image;B.src=w;var J=document.createElement("canvas"),Z=J.getContext("2d");if(Z!==null){var I=(0,mt.BP)(U);Z.clearRect(0,0,S,Q),B.onload=function(){if(I!==void 0){R(G,B,0,0,320,I);var et=b.toDataURL("image/png");p(et)}}}};Y.Z=function(C,p,P,w){return new Promise(function(F,D){_(F,D,C,p,P,w)})}}}]);

(self.webpackChunkparami_wallet=self.webpackChunkparami_wallet||[]).push([[179],{31639:function(y){y.exports={did:"did___1Wse3",unit:"unit___UR_Yf"}},4155:function(y){y.exports={indexContainer:"indexContainer___1oKuT",left:"left___3h0Sa",right:"right___1o7kr",sideCard:"sideCard___1WisH",topIcon:"topIcon___3HsoF",title:"title___fC196",input:"input___2YdZV",fiatAmount:"fiatAmount___3Fcll",selectAssets:"selectAssets___2QI7M",availableBalance:"availableBalance___1hgnr",token:"token___36NVd",icon:"icon___15HZU",name:"name___1E7m9",balance:"balance___3ic9z",fiat:"fiat___2AQA8",buttons:"buttons___3YNL6",button:"button___12z9a",listBtn:"listBtn___3O45P",field:"field___2anem",value:"value___D7eFr",fromQRCode:"fromQRCode___1dfEK",qrcode:"qrcode___3MC3N",exchanges:"exchanges___30zpx",searchBar:"searchBar___ieTJx",searchInput:"searchInput___3ngcE",assetsList:"assetsList___vjhB1",charge:"charge___sf44S",tabSelector:"tabSelector___2h6RI",tabItem:"tabItem___vWoCN",inactive:"inactive___2BWVU",card:"card___1JX6j"}},3548:function(y,M,e){"use strict";var O=e(67294),N=e(31639),Z=e.n(N),D=e(96534),r=e(85893),j=function(d){var s=d.value;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:Z().did,children:[(0,D.MP)(s),(0,r.jsx)("span",{className:Z().unit,children:"\xA0AD3"})]})})};M.Z=j},6490:function(y,M,e){"use strict";e.r(M),e.d(M,{default:function(){return Se}});var O=e(58024),N=e(39144),Z=e(402),D=e(59289),r=e(67294),j=e(43581),F=e(55909),d=e.n(F),s=e(4155),t=e.n(s),l=e(57663),o=e(71577),i=e(47673),n=e(32787),f=e(22385),B=e(31097),I=e(34792),P=e(48086),We=e(74379),re=e(38648),U=e(3182),p=e(2824),Re=e(17462),le=e(76772),ie=e(94043),x=e.n(ie),ce=e(79361),oe=e.n(ce),de=e(74855),ue=e.n(de),L=e(1096),ge=e(51625),me=e(46656),fe=e(94184),H=e.n(fe),z=e(3548),W=e(59749),a=e(85893),ve=function(E){var T=E.content;return(0,a.jsx)(le.Z,{style:{marginBottom:24},message:T,type:"error",showIcon:!0})},he=function(){var E=(0,r.useState)({}),T=(0,p.Z)(E,2),Q=T[0],R=T[1],ye=(0,r.useState)("0"),V=(0,p.Z)(ye,2),A=V[0],Me=V[1],xe=(0,r.useState)(""),G=(0,p.Z)(xe,2),J=G[0],Ce=G[1],Ne=(0,r.useState)(null),X=(0,p.Z)(Ne,2),Ie=X[0],Ee=X[1],Ae=(0,r.useState)(!1),_=(0,p.Z)(Ae,2),$=_[0],K=_[1],Ze=(0,r.useState)(!1),w=(0,p.Z)(Ze,2),De=w[0],k=w[1],Fe=(0,r.useState)(""),q=(0,p.Z)(Fe,2),ee=q[0],ae=q[1],Te=(0,r.useState)("qrcode"),te=(0,p.Z)(Te,2),b=te[0],se=te[1],S=localStorage.getItem("controllerUserAddress"),be=localStorage.getItem("controllerKeystore"),ne=localStorage.getItem("stashUserAddress"),v=(0,j.YB)(),Oe=function(){var g=(0,U.Z)(x().mark(function h(){var C,c;return x().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,(0,L.N7)(ne);case 3:C=m.sent,c=C.freeBalance,Ce("".concat(c)),m.next=11;break;case 8:m.prev=8,m.t0=m.catch(0),R({Type:"chain error",Message:m.t0.message});case 11:case"end":return m.stop()}},h,null,[[0,8]])}));return function(){return g.apply(this,arguments)}}(),Pe=function(){var g=(0,U.Z)(x().mark(function h(){var C;return x().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,window.apiWs.tx.balances.transfer(S,(0,W.HM)(A,18)).paymentInfo(ne);case 3:C=u.sent,Ee("".concat(C.partialFee)),u.next=10;break;case 7:u.prev=7,u.t0=u.catch(0),R({Type:"chain error",Message:u.t0.message});case 10:case"end":return u.stop()}},h,null,[[0,7]])}));return function(){return g.apply(this,arguments)}}(),Ue=function(){var g=(0,U.Z)(x().mark(function h(){return x().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return K(!0),c.prev=1,c.next=4,(0,L.FE)(A.toString(),be,S,ee);case 4:re.default.success({message:v.formatMessage({id:"wallet.charge.pending"}),description:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("p",{children:[v.formatMessage({id:"wallet.charge.chargeAddress"}),": ",S]})})}),j.m8.push(ge.Z.page.walletPage),K(!1),c.next=14;break;case 9:c.prev=9,c.t0=c.catch(1),R({Type:"chain error",Message:c.t0.message}),ae(""),K(!1);case 14:case"end":return c.stop()}},h,null,[[1,9]])}));return function(){return g.apply(this,arguments)}}();return(0,r.useEffect)(function(){Oe(),Pe()},[]),(0,a.jsxs)(a.Fragment,{children:[Q.Message&&(0,a.jsx)(ve,{content:Q.Message}),(0,a.jsxs)("div",{className:t().charge,children:[(0,a.jsxs)("div",{className:d().tabSelector,children:[(0,a.jsx)("div",{className:H()(d().tabItem,b==="qrcode"?"":d().inactive),onClick:function(){return se("qrcode")},children:v.formatMessage({id:"wallet.charge.qrcode"})}),(0,a.jsx)("div",{className:H()(d().tabItem,b==="stash"?"":d().inactive),onClick:function(){return se("stash")},children:v.formatMessage({id:"wallet.charge.stash"})})]}),b==="qrcode"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:t().qrcode,children:(0,a.jsx)(oe(),{value:S,size:200})}),(0,a.jsx)(ue(),{text:S,onCopy:function(){return P.default.success(v.formatMessage({id:"common.copied"}))},children:(0,a.jsxs)("div",{className:t().field,children:[(0,a.jsx)("span",{className:t().title,children:v.formatMessage({id:"wallet.charge.controllerAddress"})}),(0,a.jsx)(B.Z,{placement:"topRight",title:S,children:(0,a.jsx)("span",{className:t().value,children:S})})]})})]}),b==="stash"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{autoFocus:!0,size:"large",placeholder:"0",bordered:!1,className:"".concat(t().input," bigInput"),onChange:function(h){Me(h.target.value)},disabled:$,type:"number",value:A}),(0,a.jsxs)("div",{className:t().field,children:[(0,a.jsx)("span",{className:t().title,children:v.formatMessage({id:"wallet.charge.stashBalance"})}),(0,a.jsx)("span",{className:t().value,children:(0,a.jsx)(z.Z,{value:J})})]}),(0,a.jsxs)("div",{className:t().field,children:[(0,a.jsx)("span",{className:t().title,children:v.formatMessage({id:"wallet.charge.fee"})}),(0,a.jsx)("span",{className:t().value,children:(0,a.jsx)(z.Z,{value:Ie})})]}),(0,a.jsxs)("div",{className:t().buttons,children:[(0,a.jsx)(o.Z,{type:"primary",shape:"round",size:"large",className:t().button,loading:$,disabled:(0,W.HM)(A,18)<=BigInt(0)||(0,W.HM)(A,18)>BigInt(J),onClick:function(){return k(!0)},children:v.formatMessage({id:"common.confirm"})}),(0,a.jsx)(o.Z,{type:"text",shape:"round",size:"large",className:t().button,onClick:function(){return j.m8.goBack()},loading:$,children:v.formatMessage({id:"common.cancel"})})]}),(0,a.jsx)(me.Z,{visable:De,setVisable:k,password:ee,setPassword:ae,func:Ue})]})]})]})},pe=he,je=D.Z.Title,Be=function(){var E=(0,j.YB)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:d().mainContainer,children:(0,a.jsx)("div",{className:d().pageContainer,children:(0,a.jsxs)(N.Z,{className:d().card,children:[(0,a.jsx)("img",{src:"/images/icon/charge.svg",className:t().topIcon}),(0,a.jsx)(je,{level:2,style:{fontWeight:"bold"},className:t().title,children:E.formatMessage({id:"wallet.charge.chargeFee"})}),(0,a.jsx)(pe,{})]})})})})},Se=Be},59749:function(y,M,e){"use strict";e.d(M,{mI:function(){return F},HM:function(){return d}});var O=e(2824),N=e(13550),Z=e.n(N),D=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,o=_formatBalance.getDefaults(),i=o.unit,n=o.decimals;if(typeof t=="undefined")return"--- ".concat(i);var f=new BN("".concat(t)).toString().padStart(n+1,"0"),B=f.substr(0,f.length-n),I=f.substr(f.length-n,3);return l?"".concat(B,".").concat(I," ").concat(i):"".concat(B,".").concat(I)},r=function(t){if(!t)return new BN(0);var l=_formatBalance.getDefaults(),o=l.decimals,i="".concat(t).split("."),n=_slicedToArray(i,2),f=n[0],B=n[1],I=B===void 0?"0":B,P="".concat(f).concat(I.padEnd(o,"0"));return new BN(P)},j=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t?t.startsWith("0x")?t:"0x".concat(t):"0x"};function F(s,t){if(!s||(typeof s!="string"&&(s=s.toString()),s==="0"))return"0";if(s.length<=t){var l=s.padStart(t,"0"),o=l.search(/([0]+)$/);return o>-1&&(l=l.substring(0,o)),l.length>0?l="0."+l:l="0",l}var i=s.substring(0,s.length-t),n=s.substring(s.length-t),f=n.search(/([0]+)$/);return f>-1&&(n=n.substring(0,f)),n.length===0?i:i+"."+n}function d(s,t){if(!s||typeof s!="string")return BigInt(0);if(s.indexOf(".")===-1)return BigInt(s.padEnd(s.length+t,"0"));var l=s.split("."),o=(0,O.Z)(l,2),i=o[0],n=o[1];return i.length===1&&i==="0"&&(i=""),n.length<t?BigInt(i+n.padEnd(t,"0")):BigInt(i+n.substring(0,t))}}}]);

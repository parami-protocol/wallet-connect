(self.webpackChunkparami_wallet=self.webpackChunkparami_wallet||[]).push([[505,172],{31639:function(J){J.exports={did:"did___1Wse3",unit:"unit___UR_Yf"}},4155:function(J){J.exports={indexContainer:"indexContainer___1oKuT",left:"left___3h0Sa",right:"right___1o7kr",sideCard:"sideCard___1WisH",topIcon:"topIcon___3HsoF",title:"title___fC196",input:"input___2YdZV",fiatAmount:"fiatAmount___3Fcll",selectAssets:"selectAssets___2QI7M",availableBalance:"availableBalance___1hgnr",token:"token___36NVd",icon:"icon___15HZU",name:"name___1E7m9",balance:"balance___3ic9z",fiat:"fiat___2AQA8",buttons:"buttons___3YNL6",button:"button___12z9a",listBtn:"listBtn___3O45P",field:"field___2anem",value:"value___D7eFr",fromQRCode:"fromQRCode___1dfEK",qrcode:"qrcode___3MC3N",exchanges:"exchanges___30zpx",searchBar:"searchBar___ieTJx",searchInput:"searchInput___3ngcE",assetsList:"assetsList___vjhB1",charge:"charge___sf44S",tabSelector:"tabSelector___2h6RI",tabItem:"tabItem___vWoCN",inactive:"inactive___2BWVU",card:"card___1JX6j"}},3548:function(J,Y,s){"use strict";var le=s(67294),X=s(31639),q=s.n(X),ee=s(96534),h=s(85893),i=function(R){var l=R.value;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:q().did,children:[(0,ee.MP)(l),(0,h.jsx)("span",{className:q().unit,children:"\xA0AD3"})]})})};Y.Z=i},57651:function(J,Y,s){"use strict";var le=s(67294),X=s(31639),q=s.n(X),ee=s(96534),h=s(85893),i=function(R){var l=R.value,n=R.symbol;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:q().did,children:[(0,ee.MP)(l),n&&(0,h.jsxs)("span",{className:q().unit,children:["\xA0",n]})]})})};Y.Z=i},31103:function(J,Y,s){"use strict";s.r(Y),s.d(Y,{default:function(){return Ke}});var le=s(58024),X=s(39144),q=s(17462),ee=s(76772),h=s(3182),i=s(2824),ie=s(402),R=s(59289),l=s(94043),n=s.n(l),r=s(67294),p=s(43581),N=s(55909),S=s.n(N),U=s(4155),a=s.n(U),te=s(12968),ne=s(62462),Ye=s(57663),_=s(71577),_e=s(47673),me=s(32787),Ae=s(8812),ae=s(1096),ue=s(59749),ve=s(57651),e=s(85893),xe=function(d){var O=d.setStep,b=d.number,g=d.setNumber,c=d.token,C=d.stashUserAddress,W=(0,r.useState)(!1),K=(0,i.Z)(W,2),E=K[0],P=K[1],A=(0,r.useState)("0"),I=(0,i.Z)(A,2),w=I[0],k=I[1],D=(0,p.YB)(),L=function(){var t=(0,h.Z)(n().mark(function m(){var o,j,u,M;return n().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(Object.keys(c).length){y.next=8;break}return y.next=3,(0,ae.N7)(C);case 3:o=y.sent,j=o.freeBalance,k("".concat(j)),y.next=13;break;case 8:return y.next=10,window.apiWs.query.assets.account(c==null?void 0:c.id,C);case 10:u=y.sent,M=u.balance,M&&k("".concat(M));case 13:case"end":return y.stop()}},m)}));return function(){return t.apply(this,arguments)}}(),H=function(){var t=(0,h.Z)(n().mark(function m(){return n().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:P(!0),O("InputAddress");case 2:case"end":return j.stop()}},m)}));return function(){return t.apply(this,arguments)}}();return(0,r.useEffect)(function(){L()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(me.Z,{autoFocus:!0,size:"large",placeholder:"0",bordered:!1,className:"".concat(a().input," bigInput"),onChange:function(m){g(m.target.value)},disabled:E,type:"number",value:b}),(0,e.jsx)(_.Z,{size:"large",type:"primary",shape:"round",onClick:function(){g((0,ue.mI)(w,18))},children:D.formatMessage({id:"miner.all"})}),(0,e.jsxs)("div",{className:a().selectAssets,onClick:function(){return O("SelectAsset")},children:[(0,e.jsx)("div",{className:a().title,children:D.formatMessage({id:"wallet.send.selectAssets"})}),(0,e.jsxs)("div",{className:a().token,children:[(0,e.jsx)(ne.Z,{className:a().icon,src:(c==null?void 0:c.icon)||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),(0,e.jsx)("span",{className:a().name,children:Object.keys(c).length?c.token:"AD3"}),(0,e.jsx)(Ae.Z,{style:{color:"#ff5b00"}})]})]}),(0,e.jsxs)("div",{className:a().availableBalance,children:[(0,e.jsx)("div",{className:a().title,children:D.formatMessage({id:"wallet.send.availableBalance"})}),(0,e.jsx)("div",{className:a().balance,children:(0,e.jsx)("span",{className:a().token,children:(0,e.jsx)(ve.Z,{value:w,symbol:Object.keys(c).length?c.symbol:"AD3"})})})]}),(0,e.jsxs)("div",{className:a().buttons,children:[(0,e.jsx)(_.Z,{block:!0,type:"primary",shape:"round",size:"large",className:a().button,loading:E,disabled:(0,ue.HM)(b,18)<=BigInt(0)||(0,ue.HM)(b,18)>BigInt(w),onClick:function(){return H()},children:D.formatMessage({id:"common.continue"})}),(0,e.jsx)(_.Z,{block:!0,type:"text",shape:"round",size:"large",className:a().button,onClick:function(){return p.m8.goBack()},children:D.formatMessage({id:"common.cancel"})})]})]})},Ne=xe,Me=R.Z.Title,Ze=function(d){var O=d.setStep,b=d.address,g=d.setAddress,c=(0,r.useState)(!1),C=(0,i.Z)(c,2),W=C[0],K=C[1],E=(0,p.YB)(),P=function(){var A=(0,h.Z)(n().mark(function I(){return n().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:K(!0),O("Confirm");case 2:case"end":return k.stop()}},I)}));return function(){return A.apply(this,arguments)}}();return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Me,{level:4,children:E.formatMessage({id:"wallet.send.receiverAddress"})}),(0,e.jsx)(me.Z,{autoFocus:!0,placeholder:"did:ad3:\u2026\u2026",size:"large",className:a().input,onChange:function(I){return g(I.target.value)},disabled:W}),(0,e.jsxs)("div",{className:a().buttons,children:[(0,e.jsx)(_.Z,{block:!0,type:"primary",shape:"round",size:"large",className:a().button,loading:W,disabled:!b,onClick:function(){return P()},children:E.formatMessage({id:"common.continue"})}),(0,e.jsx)(_.Z,{block:!0,type:"text",shape:"round",size:"large",className:a().button,onClick:function(){return p.m8.goBack()},children:E.formatMessage({id:"common.cancel"})})]})]})},Ce=Ze,Qe=s(22385),Ie=s(31097),Ve=s(34792),Ee=s(48086),Ge=s(74379),ke=s(38648),ge=s(51625),De=s(46656),he=s(96534),pe=s(3548),Te=R.Z.Title,Oe=function(d){var O=d.setStep,b=d.number,g=d.token,c=d.address,C=d.userAddress,W=d.keystore,K=(0,r.useState)(!1),E=(0,i.Z)(K,2),P=E[0],A=E[1],I=(0,r.useState)(null),w=(0,i.Z)(I,2),k=w[0],D=w[1],L=(0,r.useState)({}),H=(0,i.Z)(L,2),t=H[0],m=H[1],o=(0,r.useState)(!1),j=(0,i.Z)(o,2),u=j[0],M=j[1],$=(0,r.useState)(""),y=(0,i.Z)($,2),T=y[0],Q=y[1],v=(0,p.YB)(),Z=c,re=function(){var V=(0,h.Z)(n().mark(function z(){return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(A(!0),Z.indexOf("did:ad3:")>-1&&(Z=(0,he.Zc)(Z)),B.prev=3,Object.keys(g).length){B.next=9;break}return B.next=7,(0,ae.FE)(b,W,Z,T);case 7:B.next=11;break;case 9:return B.next=11,(0,ae.BT)(g[Object.keys(g)[0]],b.toString(),W,Z,T);case 11:ke.default.success({message:v.formatMessage({id:"wallet.send.pending"}),description:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("p",{children:[v.formatMessage({id:"wallet.send.receiverAddress"}),": ",c]})})}),p.m8.push(ge.Z.page.walletPage),A(!1),B.next=21;break;case 16:B.prev=16,B.t0=B.catch(3),m({Type:"chain error",Message:B.t0.message}),Q(""),A(!1);case 21:case"end":return B.stop()}},z,null,[[3,16]])}));return function(){return V.apply(this,arguments)}}(),f=function(){var V=(0,h.Z)(n().mark(function z(){var G,B;return n().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(A(!0),Z.indexOf("did:ad3:")>-1&&(Z=(0,he.Zc)(Z)),x.prev=3,Object.keys(g).length){x.next=11;break}return x.next=7,(0,ae.$u)(Z,C,b);case 7:G=x.sent,D("".concat(G)),x.next=15;break;case 11:return x.next=13,(0,ae.pr)(g[Object.keys(g)[0]],Z,C,b);case 13:B=x.sent,D("".concat(B));case 15:x.next=21;break;case 17:x.prev=17,x.t0=x.catch(3),Ee.default.error(v.formatMessage({id:"error.receiverAddress.error"})),O("InputAddress");case 21:A(!1);case 22:case"end":return x.stop()}},z,null,[[3,17]])}));return function(){return V.apply(this,arguments)}}();(0,r.useEffect)(function(){f()},[]);var fe=function(z){var G=z.content;return(0,e.jsx)(ee.Z,{style:{marginBottom:24},message:G,type:"error",showIcon:!0})};return(0,e.jsxs)(e.Fragment,{children:[t.Message&&(0,e.jsx)(fe,{content:t.Message}),(0,e.jsx)(Te,{level:4,children:v.formatMessage({id:"wallet.send.confirm"})}),(0,e.jsxs)("div",{className:a().listBtn,children:[(0,e.jsxs)("div",{className:a().field,children:[(0,e.jsx)("span",{className:a().title,children:v.formatMessage({id:"wallet.send.amount"})}),(0,e.jsx)("span",{className:a().value,children:(0,e.jsx)(ve.Z,{value:(0,ue.HM)(b,18).toString(),symbol:Object.keys(g).length?g.symbol:"AD3"})})]}),(0,e.jsxs)("div",{className:a().field,children:[(0,e.jsx)("span",{className:a().title,children:v.formatMessage({id:"wallet.send.receiverAddress"})}),(0,e.jsx)(Ie.Z,{placement:"topRight",title:c,children:(0,e.jsx)("span",{className:a().value,children:c})})]}),(0,e.jsxs)("div",{className:a().field,children:[(0,e.jsx)("span",{className:a().title,children:v.formatMessage({id:"wallet.send.serviceFee"})}),(0,e.jsx)("span",{className:a().value,children:(0,e.jsx)(pe.Z,{value:k})})]})]}),(0,e.jsxs)("div",{className:a().buttons,children:[(0,e.jsx)(_.Z,{block:!0,type:"primary",shape:"round",size:"large",className:a().button,loading:P,disabled:!b||!g||!c,onClick:function(){return M(!0)},children:v.formatMessage({id:"common.submit"})}),(0,e.jsx)(_.Z,{block:!0,type:"text",shape:"round",size:"large",className:a().button,onClick:function(){return p.m8.goBack()},loading:P,children:v.formatMessage({id:"common.cancel"})})]}),(0,e.jsx)(De.Z,{visable:u,setVisable:M,password:T,setPassword:Q,func:re})]})},Pe=Oe,$e=s(72467),Ue=s(43002),We=function(d){var O=d.setStep,b=d.setToken,g=d.AD3Balance,c=(0,r.useState)(),C=(0,i.Z)(c,2),W=C[0],K=C[1],E=(0,r.useState)([]),P=(0,i.Z)(E,2),A=P[0],I=P[1],w=localStorage.getItem("stashUserAddress"),k=function(){var t=(0,h.Z)(n().mark(function m(o){var j,u,M,$,y,T,Q,v,Z;return n().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(j=[],!o){f.next=26;break}f.t0=n().keys(o);case 3:if((f.t1=f.t0()).done){f.next=25;break}return u=f.t1.value,f.next=7,window.apiWs.query.assets.account(Number(u),w);case 7:if(M=f.sent,$=M.balance,!(!!$&&$>0&&!o[u].name.endsWith("LP*"))){f.next=23;break}return f.next=12,(0,Ue.yI)(u);case 12:return y=f.sent,f.next=15,(0,$e.CC)(y);case 15:if(T=f.sent,Q=void 0,v=T.toHuman(),v){f.next=20;break}return f.abrupt("return");case 20:v.avatar.indexOf("ipfs://")>-1&&(Z=v.avatar.substring(7),Q=ge.Z.ipfs.endpoint+Z),j.push({id:u,token:o[u].name,symbol:o[u].symbol,balance:$,icon:Q});case 23:f.next=3;break;case 25:I(j);case 26:case"end":return f.stop()}},m)}));return function(o){return t.apply(this,arguments)}}(),D=function(){var t=(0,h.Z)(n().mark(function m(){var o,j,u,M,$,y,T;return n().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,window.apiWs.query.assets.metadata.entries();case 2:for(o=v.sent,j={},u=0;u<o.length;u++)M=(0,i.Z)(o[u],2),$=M[0],y=M[1],T=$.toHuman(),T&&(j[T[0]]=y.toHuman());k(j);case 6:case"end":return v.stop()}},m)}));return function(){return t.apply(this,arguments)}}(),L=(0,p.YB)(),H=function(){var t=(0,h.Z)(n().mark(function m(o){return n().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:b(o),O("InputAmount");case 2:case"end":return u.stop()}},m)}));return function(o){return t.apply(this,arguments)}}();return(0,r.useEffect)(function(){D()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:a().searchBar,children:(0,e.jsx)(me.Z,{autoFocus:!0,size:"large",className:a().searchInput,onChange:function(m){return K(m.target.value)},placeholder:L.formatMessage({id:"wallet.send.searchAsset"})})}),(0,e.jsxs)("div",{className:a().assetsList,children:[(0,e.jsxs)("div",{className:a().title,children:[(0,e.jsx)("span",{children:L.formatMessage({id:"wallet.send.name"})}),(0,e.jsx)("span",{children:L.formatMessage({id:"wallet.send.availableBalance"})})]}),(0,e.jsxs)("div",{className:a().field,onClick:function(){return H({})},children:[(0,e.jsxs)("span",{className:a().title,children:[(0,e.jsx)(ne.Z,{className:a().icon,src:"/images/logo-round-core.svg",preview:!1}),(0,e.jsx)("span",{className:a().name,children:"AD3"})]}),(0,e.jsx)("span",{className:a().value,children:(0,e.jsx)(pe.Z,{value:g})})]},"ad3"),A.map(function(t){return(0,e.jsxs)("div",{className:a().field,onClick:function(){var o={};o[t.symbol]=t==null?void 0:t.id,H(t)},children:[(0,e.jsxs)("span",{className:a().title,children:[(0,e.jsx)(ne.Z,{className:a().icon,src:(t==null?void 0:t.icon)||"/images/logo-round-core.svg",fallback:"/images/logo-round-core.svg",preview:!1}),(0,e.jsx)("span",{className:a().name,children:t==null?void 0:t.token})]}),(0,e.jsx)("span",{className:a().value,children:(0,e.jsx)(ve.Z,{value:t==null?void 0:t.balance,symbol:t==null?void 0:t.symbol})})]},t==null?void 0:t.assetsID)})]}),(0,e.jsx)(_.Z,{block:!0,type:"text",shape:"round",size:"large",className:a().button,onClick:function(){return O("InputAmount")},style:{marginTop:20},children:L.formatMessage({id:"common.cancel"})})]})},we=We,Fe=R.Z.Title,Re=function(){var d=(0,r.useState)("InputAmount"),O=(0,i.Z)(d,2),b=O[0],g=O[1],c=(0,r.useState)("0"),C=(0,i.Z)(c,2),W=C[0],K=C[1],E=(0,r.useState)({}),P=(0,i.Z)(E,2),A=P[0],I=P[1],w=(0,r.useState)(),k=(0,i.Z)(w,2),D=k[0],L=k[1],H=(0,r.useState)(null),t=(0,i.Z)(H,2),m=t[0],o=t[1],j=(0,r.useState)(null),u=(0,i.Z)(j,2),M=u[0],$=u[1],y=(0,r.useState)(null),T=(0,i.Z)(y,2),Q=T[0],v=T[1],Z=(0,r.useState)(null),re=(0,i.Z)(Z,2),f=re[0],fe=re[1],V=(0,r.useState)({}),z=(0,i.Z)(V,2),G=z[0],B=z[1],oe=localStorage.getItem("stashUserAddress"),x=localStorage.getItem("controllerKeystore"),Le=(0,p.YB)(),ze=function(){var Se=(0,h.Z)(n().mark(function de(){var se,je,ye,be,Be;return n().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,(0,ae.N7)(oe);case 3:se=F.sent,je=se.freeBalance,ye=se.reserved,be=se.totalBalance,Be=se.nonce,$("".concat(je)),v("".concat(ye)),o("".concat(be)),fe("".concat(Be)),F.next=17;break;case 14:F.prev=14,F.t0=F.catch(0),B({Type:"chain error",Message:F.t0.message});case 17:case"end":return F.stop()}},de,null,[[0,14]])}));return function(){return Se.apply(this,arguments)}}();(0,r.useEffect)(function(){ze()},[]);var He=function(de){var se=de.content;return(0,e.jsx)(ee.Z,{style:{marginBottom:24},message:se,type:"error",showIcon:!0})};return(0,e.jsxs)(e.Fragment,{children:[G.Message&&(0,e.jsx)(He,{content:G.Message}),(0,e.jsx)("div",{className:S().mainContainer,children:(0,e.jsx)("div",{className:S().pageContainer,children:(0,e.jsxs)(X.Z,{className:S().card,children:[(0,e.jsx)("img",{src:"/images/icon/send.svg",className:a().topIcon}),(0,e.jsx)(Fe,{level:2,style:{fontWeight:"bold"},className:a().title,children:Le.formatMessage({id:"wallet.send.title"})}),b==="InputAmount"&&(0,e.jsx)(Ne,{setStep:g,number:W,setNumber:K,token:A,setToken:I,stashUserAddress:oe}),b==="InputAddress"&&(0,e.jsx)(Ce,{setStep:g,address:D,setAddress:L}),b==="Confirm"&&(0,e.jsx)(Pe,{setStep:g,number:W,token:A,address:D,userAddress:oe,keystore:x}),b==="SelectAsset"&&(0,e.jsx)(we,{setStep:g,setToken:I,AD3Balance:M})]})})})]})},Ke=Re},59749:function(J,Y,s){"use strict";s.d(Y,{mI:function(){return ie},HM:function(){return R}});var le=s(2824),X=s(13550),q=s.n(X),ee=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,p=_formatBalance.getDefaults(),N=p.unit,S=p.decimals;if(typeof n=="undefined")return"--- ".concat(N);var U=new BN("".concat(n)).toString().padStart(S+1,"0"),a=U.substr(0,U.length-S),te=U.substr(U.length-S,3);return r?"".concat(a,".").concat(te," ").concat(N):"".concat(a,".").concat(te)},h=function(n){if(!n)return new BN(0);var r=_formatBalance.getDefaults(),p=r.decimals,N="".concat(n).split("."),S=_slicedToArray(N,2),U=S[0],a=S[1],te=a===void 0?"0":a,ne="".concat(U).concat(te.padEnd(p,"0"));return new BN(ne)},i=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?n.startsWith("0x")?n:"0x".concat(n):"0x"};function ie(l,n){if(!l||(typeof l!="string"&&(l=l.toString()),l==="0"))return"0";if(l.length<=n){var r=l.padStart(n,"0"),p=r.search(/([0]+)$/);return p>-1&&(r=r.substring(0,p)),r.length>0?r="0."+r:r="0",r}var N=l.substring(0,l.length-n),S=l.substring(l.length-n),U=S.search(/([0]+)$/);return U>-1&&(S=S.substring(0,U)),S.length===0?N:N+"."+S}function R(l,n){if(!l||typeof l!="string")return BigInt(0);if(l.indexOf(".")===-1)return BigInt(l.padEnd(l.length+n,"0"));var r=l.split("."),p=(0,le.Z)(r,2),N=p[0],S=p[1];return N.length===1&&N==="0"&&(N=""),S.length<n?BigInt(N+S.padEnd(n,"0")):BigInt(N+S.substring(0,n))}}}]);
